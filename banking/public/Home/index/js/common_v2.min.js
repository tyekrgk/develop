$(function(){function a(a){var b=$(".sub-nav[data-type="+a+"]"),a=$(".arr-trigger[data-type="+a+"]");$(".sub-nav").hide();$(".arr-trigger").removeClass("arr-trigger-hover");b.show();a.addClass("arr-trigger-hover")}function c(a){var b=$(".sub-nav[data-type="+a+"]"),a=$(".arr-trigger[data-type="+a+"]");b.hide();a.removeClass("arr-trigger-hover")}var e;$(".arr-trigger").mouseenter(function(){var d=$(this).attr("data-type"),b=$(".sub-nav[data-type="+d+"]"),c=$(this).offset().left+$(this).width()/2-b.width()/
2;clearTimeout(e);b.css("left",c);a(d)}).mouseleave(function(){var a=$(this).attr("data-type");e=setTimeout(function(){c(a)},200)});$(".sub-nav").mouseenter(function(){var d=$(this).attr("data-type");clearTimeout(e);a(d)}).mouseleave(function(){var a=$(this).attr("data-type");e=setTimeout(function(){c(a)},200)});$(".sub-nav .channel li").hover(function(){$(this).addClass("cur");$(this).siblings().removeClass("cur")},function(){});$(".tab-ck-trigger").click(function(){var a=$(this).closest(".tab-ck-box").find(".tab-ck-cont"),
b=$(this).index();$(this).addClass("cur");$(this).siblings(".tab-ck-trigger").removeClass("cur");a.hide();a.eq(b).show()});tableThead()});
var tableThead=function(){if(0<$("#maincont").length&&"true"==$("#maincont").attr("data-fixedthead")){$("#maincont").find(".m-table thead").find("tr th").each(function(){$(this).width($(this).width())});if(0>=$(".fixed_thead").length){var a=$('<div class="fixed_thead hide"><table class="m-table m-pager-table"></table></div>');$("#maincont").before(a);$("#maincont").find(".m-table thead").clone().appendTo(a.find("table"))}else a=$(".fixed_thead"),$(".fixed_thead").find("table thead").html($("#maincont").find(".m-table thead").clone().html());
var c=$("#maincont").find(".m-table thead").offset().top,e=0<$("#maincont").length?$("#maincont .m-pager").offset().top:$(".m-pager").offset().top;$(window).scroll(function(){if(0>=$(".m-pager").length)return!1;$(this).scrollTop()>=c&&$(this).scrollTop()<=e?a.show():a.hide()})}},mpager=function(a,c){this.element=$(a);this.options=c||{}};
mpager.prototype.init=function(){this.boardElem=this.element.find(".m-pager-board a[board]");this.tableElem=this.element.find(".m-pager-table");this.fieldElem=this.tableElem.find("a[field]");this.pagerElem=this.element.find(".m-pager a[page]");this.default_board=this.board=this.getBoard();this.default_field=this.field=this.getField();this.default_order=this.order=this.getOrder();this.default_page=this.page=this.getPage();this.ajax=1;this.bindEvent()};
mpager.prototype.getBoard=function(a){return a?$(a).attr("board"):0<this.element.find(".m-pager-board .cur a[board]").length?this.element.find(".m-pager-board .cur a[board]").attr("board"):this.element.attr("board")};mpager.prototype.getField=function(a){return a?$(a).attr("field"):this.element.find(".m-pager-table .cur a[field]").attr("field")};mpager.prototype.getOrder=function(a){return a?"desc"==$(a).attr("order")?"asc":"desc":"desc"};
mpager.prototype.getPage=function(a){return a?$(a).attr("page"):0<this.element.find(".m-pager a.cur").length?this.element.find(".m-pager a.cur").attr("page"):1};mpager.prototype.bindEvent=function(){var a=this;a.boardElem.live("click",function(){a.changeBoard(this)});a.fieldElem.live("click",function(){$(this).parent().hasClass("cur")?a.changeOrder(this):a.changeField(this)});a.pagerElem.live("click",function(){a.changePage(this)})};
mpager.prototype.changeBoard=function(a){this.boardElem.parent().removeClass("cur");$(a).parent().addClass("cur");this.board=this.getBoard(a);this.field=this.default_field;this.order=this.default_order;this.page=this.default_page;this.changeContent()};mpager.prototype.changeField=function(a){this.field=this.getField(a);this.order=this.default_order;this.page=this.default_page;this.changeContent()};mpager.prototype.changeOrder=function(a){this.order=this.getOrder(a);this.page=this.default_page;this.changeContent()};
mpager.prototype.changePage=function(a){this.page=this.getPage(a);this.changeContent()};mpager.prototype.diffRequest=function(){var a=$("#requestQuery").val()?eval("("+$("#request").val()+")"):{},c=$("#requestQuery").val()?$("#requestQuery").val():"",e=[],d={board:this.board,field:this.field,order:this.order,page:this.page,ajax:1},b;for(b in d)d[b]&&(a[b]=d[b]);for(b in a)a[b]&&("undefined"!=typeof d.page||"page"!=b)&&e.push(b+"/"+a[b]);return e.join("/")+"/"+c};
mpager.prototype.changeContent=function(){var a=this.diffRequest(),c="/"+$("#baseUrl").val()+"/"+a;$.ajax({url:c,type:"GET",dataType:"html",success:function(c){if($("div").is("#maincont"))$("#maincont").html(c),tableThead();else{var d=a.split("/")[1];$("."+d+"_maincont").html(c)}}})};
