/*
 almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/almond for details
*/
(function(){var X,T,v;(function(b){function i(a,j){var c,t,f,k,h,d,i,l,g,b=j&&j.split("/"),m=q.map,s=m&&m["*"]||{};if(a&&"."===a.charAt(0))if(j){a=a.split("/");h=a.length-1;q.nodeIdCompat&&e.test(a[h])&&(a[h]=a[h].replace(e,""));a=b.slice(0,b.length-1).concat(a);for(h=0;h<a.length;h+=1)if(c=a[h],"."===c)a.splice(h,1),h-=1;else if(".."===c)if(1===h&&(".."===a[2]||".."===a[0]))break;else 0<h&&(a.splice(h-1,2),h-=2);a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((b||s)&&m){c=a.split("/");
for(h=c.length;0<h;h-=1){t=c.slice(0,h).join("/");if(b)for(g=b.length;0<g;g-=1)if(f=m[b.slice(0,g).join("/")])if(f=f[t]){k=f;d=h;break}if(k)break;!i&&s&&s[t]&&(i=s[t],l=h)}!k&&i&&(k=i,d=l);k&&(c.splice(0,d,k),a=c.join("/"))}return a}function d(e,j){return function(){var c=a.call(arguments,0);"string"!==typeof c[0]&&1===c.length&&c.push(null);return h.apply(b,c.concat([e,j]))}}function g(a){return function(e){return i(e,a)}}function l(a){return function(e){f[a]=e}}function n(a){if(j.call(s,a)){var e=
s[a];delete s[a];r[a]=!0;m.apply(b,e)}if(!j.call(f,a)&&!j.call(r,a))throw Error("No "+a);return f[a]}function o(a){var e,j=a?a.indexOf("!"):-1;-1<j&&(e=a.substring(0,j),a=a.substring(j+1,a.length));return[e,a]}function p(a){return function(){return q&&q.config&&q.config[a]||{}}}var m,h,c,k,f={},s={},q={},r={},j=Object.prototype.hasOwnProperty,a=[].slice,e=/\.js$/;c=function(a,e){var j,c=o(a),f=c[0],a=c[1];f&&(f=i(f,e),j=n(f));f?a=j&&j.normalize?j.normalize(a,g(e)):i(a,e):(a=i(a,e),c=o(a),f=c[0],a=
c[1],f&&(j=n(f)));return{f:f?f+"!"+a:a,n:a,pr:f,p:j}};k={require:function(a){return d(a)},exports:function(a){var e=f[a];return"undefined"!==typeof e?e:f[a]={}},module:function(a){return{id:a,uri:"",exports:f[a],config:p(a)}}};m=function(a,e,B,t){var x,h,i,g,m=[];h=typeof B;var q,t=t||a;if("undefined"===h||"function"===h){e=!e.length&&B.length?["require","exports","module"]:e;for(g=0;g<e.length;g+=1)if(i=c(e[g],t),h=i.f,"require"===h)m[g]=k.require(a);else if("exports"===h)m[g]=k.exports(a),q=!0;
else if("module"===h)x=m[g]=k.module(a);else if(j.call(f,h)||j.call(s,h)||j.call(r,h))m[g]=n(h);else if(i.p)i.p.load(i.n,d(t,!0),l(h),{}),m[g]=f[h];else throw Error(a+" missing "+h);e=B?B.apply(f[a],m):void 0;if(a)if(x&&x.exports!==b&&x.exports!==f[a])f[a]=x.exports;else if(e!==b||!q)f[a]=e}else a&&(f[a]=B)};X=T=h=function(a,e,j,f,x){if("string"===typeof a)return k[a]?k[a](e):n(c(a,e).f);if(!a.splice){q=a;q.deps&&h(q.deps,q.callback);if(!e)return;e.splice?(a=e,e=j,j=null):a=b}e=e||function(){};"function"===
typeof j&&(j=f,f=x);f?m(b,a,e,j):setTimeout(function(){m(b,a,e,j)},4);return h};h.config=function(a){return h(a)};X._defined=f;v=function(a,e,c){if("string"!==typeof a)throw Error("See almond README: incorrect module build, no module name");e.splice||(c=e,e=[]);!j.call(f,a)&&!j.call(s,a)&&(s[a]=[a,e,c])};v.amd={jQuery:!0}})();v("almond",function(){});v("mathToolkit",[],function(){return{decimalRound:function(b,i){var d=Math.pow(10,i);return Math.round(b*d)/d}}});v("arrayToolkit",[],function(){return{min:function(b,
i){var d=-1,g=b.length,l,n;if(1===arguments.length){for(;++d<g&&!(null!=(l=b[d])&&l<=l);)l=void 0;for(;++d<g;)if(null!=(n=b[d])&&l>n)l=n}else{for(;++d<g&&!(null!=(l=i.call(b,b[d],d))&&l<=l);)l=void 0;for(;++d<g;)if(null!=(n=i.call(b,b[d],d))&&l>n)l=n}return l},max:function(b,i){var d=-1,g=b.length,l,n;if(1===arguments.length){for(;++d<g&&!(null!=(l=b[d])&&l<=l);)l=void 0;for(;++d<g;)if(null!=(n=b[d])&&n>l)l=n}else{for(;++d<g&&!(null!=(l=i.call(b,b[d],d))&&l<=l);)l=void 0;for(;++d<g;)if(null!=(n=i.call(b,
b[d],d))&&n>l)l=n}return l},remove:function(b){var i,d=arguments,g=d.length,l;if(Array.prototype.indexOf)for(;1<g&&b.length;)for(i=d[--g];-1!==(l=b.indexOf(i));)b.splice(l,1);else for(;1<g&&b.length;)for(i=d[--g];-1!==(l=$.inArray(i,b));)b.splice(l,1);return b},map:function(b,i){var d="";$.map(b,function(g,l){l===i&&(d=g)});return d},mergeLargeArr:function(b,i){var d=b.length,g=d;if(d>=i.length){d=0;for(g=i.length;d<g;d++)b.push(i[d]);return b}for(;0<=--g;)i.unshift(b[g]);return i},unshiftArray:function(b,
i){return b.splice.apply(b,[0,i.length].concat(i))}}});v("EventTarget",[],function(){var b=function(){this.eventTopics={};this.eventSubUid=-1};b.prototype.trigger=function(i,d){if(!this.eventTopics[i])return!1;var g=this;setTimeout(function(){for(var l=g.eventTopics[i],b=l?l.length:0;b--;)l[b].func(d)},0);return!0};b.prototype.on=function(i,d){this.eventTopics[i]||(this.eventTopics[i]=[]);var g=(++this.eventSubUid).toString();this.eventTopics[i].push({token:g,func:d});return g};b.prototype.off=function(i){for(var d in this.eventTopics)if(this.eventTopics[d])for(var g=
0,b=this.eventTopics[d].length;g<b;g++)if(this.eventTopics[d][g].token===i)return this.eventTopics[d].splice(g,1),i;return!1};return b});v("hexinStock/util",[],function(){function b(i){function d(){}d.prototype=i;return new d}return{inheritPrototype:function(i,d){var g=b(d.prototype);g.constructor=i;i.prototype=g},isGg:function(i){return 0==i.indexOf("HK")||0==i.indexOf("HS")},isIndex:function(i){return i.match(/^(1A|1B|1C|399|3C|HSI)/)?!0:!1},formatUnit:function(i,d,g){var b,d=d||0;return i>=(b=
Math.pow(10,8))?(i/b).toFixed(d)+(g?"亿":""):i>=(b=Math.pow(10,4))?(i/b).toFixed(d)+(g?"万":""):i}}});v("Xhr",[],function(){return{jqGetScript:function(b,i,d){var g={};$.ajax({url:b,dataType:"script",cache:!0,success:function(){g=window["var_"+i];d(g)}})},jqXhrWithoutCallback:function(b,i,d){var g;(function(){window[d]=function(d){i(d)};g=$.ajax({type:"get",url:b,dataType:"script",cache:!0,success:function(){window[d]=void 0;try{delete window[d]}catch(i){}},error:function(){window[d]=void 0;try{delete window[d]}catch(i){}}})})();
return g}}});v("UrlConfig",[],function(){return{urlHost:"http://d.10jqka.com.cn/"}});v("KLineProvider","arrayToolkit,mathToolkit,EventTarget,hexinStock/util,Xhr,UrlConfig".split(","),function(b,i,d,g,l,n){var o=function(j){return(""+j).slice(0,4)},p={"0":"days",1:"weeks",2:"months",3:"fiveMin",4:"thirtyMin",5:"sixtyMin",6:"oneMin",7:"fourHour"},m={"0":"notRehabilitation",1:"forwardRehabilitation",2:"backwardRehabilitation"},h=function(j){var a={};j.replace(/([0-7])([0-2])/g,function(e,j,c){a.stockType=
p[j];a.rehabilitation=m[c]});return a},c=function(j){j+="";return new Date(j.slice(0,4),j.slice(4,6)-1,j.slice(6,8))},k=function(j,a,e){if("days"===e)return j===a;return"weeks"===e?(e=c(Math.min(j,a)),j=c(Math.max(j,a)),6>=e.getDay()+(j.getTime()-e.getTime())/864E5):"months"===e?j.slice(4,6)===a.slice(4,6):j===a},f=function(j){return[j[1],j[7],j[8],j[9],j[11],j[13],j[19],j[1968584]]},s=function(j,a){var e=j.data.indexOf(a);if(-1==e)throw a+" cann't find in the js file !";var c=j.data.split(a)[1].split(";");
return j.data.slice(0,e)+a+c[0]},q=function(j){for(var a={},e=[],c=j.length-1;0<=c;c--)a={},a.key=o(j[c].data),a.data=j[c].data,e.push(a);e.sort(function(a,e){return a.key<e.key?-1:1});return e},r=function(j,a){var e=[];j.split(a)[1].replace(/([^\/.]+)/g,function(a){e.push(a)});e.pop();return"quotebridge_"+e.join("_")},b=function(j){d.call(this);var a={url:n.urlHost,urlVersion:"v2/line/",historyUrlName:"last",code:["17_600000"],stockType:"00",ma:[5,10,30,60],betweenTwoDays:null,isKeepingGet:!1,drawWidth:0,
intervalTime:6E4};this.lastGetTime=this.dataLastTime="";this.yearsManagerObj={};this.historyStart=this.total="";this.historyCache={};this.isOpen=1;this.PMCloseTime=this.PMOpenTime=this.AMCloseTime=this.AMOpenTime="";this.numInLastJsFile=0;this.dataArray=[];this.configs=$.extend({},a,j)};g.inheritPrototype(b,d);b.prototype.getFromWeb=function(j,a,e){var c;"currentData"==e?(e=this.getWebUrl(a,"today"),c=r(e,this.configs.url),l.jqXhrWithoutCallback(e,j,c)):(e=this.getWebUrl(a),c=r(e,this.configs.url),
l.jqXhrWithoutCallback(e,function(e){e.code=a;j(e)},c))};b.prototype.setDataLastTime=function(j){return j[j.length-1].t};b.prototype._initByFirstGetData=function(j,a){var e=j.rt.split(","),c=e[0].split("-"),e=e[1].split("-");this.AMOpenTime=c[0];this.AMCloseTime=c[1];this.PMOpenTime=e[0];this.PMCloseTime=e[1];this.yearsManagerObj=j.year;this.total=j.total;this.historyStart=j.start;this.numInLastJsFile=j.num;this.stockName=j.name;this.lastGetTime=a.dt;this.isOpen=a.open;this.currentDate=a["1"]};b.prototype._tidyData=
function(j,a){var e=a[0],c=a[1][j],J=this;this._initByFirstGetData(e,c);this.trigger("getStockNameInfo",{stockName:this.stockName,code:this.configs.code[0]});var B=f(c),c=B.join(","),B=B[0],e=e.data.split(";"),t=e[e.length-1].split(",")[0],x=h(this.configs.stockType);k(B,t,x.stockType)&&e.pop();e.push(c);this.setMaLastArr(e);this.dataArray=this.arrageDataByFirstGet(e);this.dataLastTime=B;!this.configs.betweenTwoDays&&!this.configs.historyDataAndNum?(this.trigger("getDataByKeeping",this.dataArray),
this.trigger("getFirstGetData",this.dataArray)):this.configs.historyDataAndNum?this.getDataByYearsAndNum(this.configs.historyDataAndNum,function(a){J.trigger("getDataByKeeping",a);J.trigger("getFirstGetData",a)}):this.getBetweenTwoDays(this.configs.betweenTwoDays,function(a){J.trigger("getDataByKeeping",a);J.trigger("getFirstGetData",a)});this.stopGetDataOnConditions();this.configs.isKeepingGet&&this.keepingGetData(j)};b.prototype.stopGetDataOnConditions=function(){(0===this.isOpen||this.lastGetTime>
this.AMCloseTime&&this.lastGetTime<this.PMOpenTime||this.lastGetTime>this.PMCloseTime||this.lastGetTime<this.AMOpenTime)&&this.stopGetData()};b.prototype.keepingGetEachStock=function(j,a){var e=this.arrageDataByKeepGet(j,a),c=f(j[a]),k=this.getMaDefaultObj(this.configs.ma);e.t==this.dataLastTime?(this.maLastArr.pop(),this.maLastArr.push(c.join(",")),c=this.getMaData(this.maLastArr,this.maLastArr.length-1,this.configs.ma,this.dataArray[this.dataArray.length-2]),$.extend(e,k,c),this.dataArray.pop(),
this.dataArray.push(e)):(this.maLastArr.push(c.join(",")),c=this.getMaData(this.maLastArr,this.maLastArr.length-1,this.configs.ma,this.dataArray[this.dataArray.length-1]),$.extend(e,k,c),this.dataArray.push(e),this.dataLastTime=this.setDataLastTime(this.dataArray))};b.prototype.keepingGetData=function(j){var a=this;this.keepingGetHandle=setTimeout(function(){a.getFromWeb(function(e){a.keepingGetEachStock(e,j);a.trigger("getDataByKeeping",a.dataArray);a.lastGetTime=e[j].dt;a.stopGetDataOnConditions()},
j,"currentData");a.keepingGetHandle=setTimeout(arguments.callee,a.configs.intervalTime)},a.configs.intervalTime)};b.prototype.stopGetData=function(){this.configs.isKeepingGet=!1;clearTimeout(this.keepingGetHandle)};b.prototype.getYearFromInfoByYearToAndNum=function(j,a,e){var c=[],f,k,t=e?e:0;$.each(this.yearsManagerObj,function(a){c.push(a);a===j&&(f=c.length-1)});var h=c[0];if(a>=this.total)return c[0];if(a==t||a<=e||0===f)return j;for(var e=f,d;0<e--;){d=this.yearsManagerObj[c[e]];t+=d;if(t>=a){k=
c[e];break}else if(c[e]===h){k=c[e];break}if(1===e&&t<a)return c[0]}return k};b.prototype.getAfterDataByYearsAndNum=function(j,a){var e=j[0],c=o(j[1]),f=this,k,t,h="",d="",i="";$.each(this.yearsManagerObj,function(a,j){a>c&&0<e&&(e-=j,k=a)});k>>=0;var g=c>>0>=k?k:c>>0;this.getDataInterval(g,k,function(e){t=q(e);for(e=0;e<t.length;e++){if(t[e].key==k)h=t[e].data;t[e].key==g?i=t[e].data+";":t[e].key>g&&t[e].key<k&&(d+=t[e].data+";")}e=i+d+h;g===k&&(e=h);e=f.arrangeDataByYears(e);a(e)})};b.prototype.getDataByYearsAndNum=
function(j,a){if(3<=j.length)this.getAfterDataByYearsAndNum(j,a);else{var e=j[0],c=o(j[1]),f=this,k=this.getYearFromInfoByYearToAndNum(c,e),t,h="",d="",i="";this.getDataInterval(k,c>>0,function(e){t=q(e);for(e=0;e<t.length;e++)t[e].key==c&&(h=s(t[e],""+j[1])),t[e].key===k?i=t[e].data+";":t[e].key>k&&t[e].key<c&&(d+=t[e].data+";");e=i+d+h;k===c&&(e=h);e=f.arrangeDataByYears(e);a(e)})}};b.prototype.getBetweenTwoDays=function(j,a){var e=o(j[0])>>0,c=o(j[1])>>0,f,k,t=this;this.getDataInterval(e-1,c,function(h){for(var d=
"",i=0;i<h.length;i++)0===h[i].data.indexOf(e-1)?f=h[i].data:0===h[i].data.indexOf(c)?k=s(h[i],""+j[1]):d+=h[i].data+";";h=t.arrangeDataByYears(f+";"+d+k);a(h)})};b.prototype.getDataInterval=function(j,a,e){for(var c=a-j+1,a=this.configs.code[0],f=[],k,h=0;h<c;h++){var x=this.getWebUrl(a,""+(+j+h));k=r(x,this.configs.url);l.jqXhrWithoutCallback(x,function(a){f.push(a);f.length===c&&e(f)},k)}};b.prototype.setKeepingGetStatus=function(j){this.isKeepingGet=j?!0:!1};b.prototype.getWebUrl=function(j,a){return this.configs.url+
this.configs.urlVersion+j+"/"+this.configs.stockType+"/"+("today"===a?"today.js":a?a+".js":this.configs.historyUrlName+".js")};b.prototype.arrageDataByFirstGet=function(j){return this._getDataArray(j)};b.prototype.setMaLastArr=function(j){var a=this.configs.ma,a=a[a.length-1];this.maLastArr=a>=j.length?j:j.slice(-a-1)};b.prototype.arrageDataByKeepGet=function(j,a){return this.getDataWithoutMa(f(j[a]))};b.prototype.getDataWithoutMa=function(j){return{code:this.configs.code[0],s:this.getKLineStatus(parseFloat(j[1]),
parseFloat(j[4])),t:j[0],o:parseFloat(j[1]),a:parseFloat(j[2]),i:parseFloat(j[3]),c:parseFloat(j[4]),n:parseFloat(j[5]),np:parseFloat(j[6]),h:parseFloat(j[7])}};b.prototype.arrangeDataByYears=function(j){return this._getDataArray(j.split(";"))};b.prototype._getDataArray=function(j){for(var a=[],e=j.length,c=this.configs.ma,f=this.getMaDefaultObj(c),k=[],h={},x=0;x<e;x++)k=j[x].split(","),h=this.getMaData(j,x,c,a[x-1]),a[x]=this.getDataWithoutMa(k),$.extend(a[x],f,h);return a};b.prototype.getMaData=
function(j,a,e,c){for(var f={},k=0;k<e.length;k++){var h="ma"+e[k],x=+e[k],d=0,d=0,g="nMa"+e[k],b=0;if(a+1<x)break;if(null!==c[h])d=c[h]*x-+j[a-x].split(",")[4]+ +j[a].split(",")[4],b=c[g]*x-+j[a-x].split(",")[5]+ +j[a].split(",")[5];else for(g=0;g<x;g++)var m=j[a-g].split(","),d=d+ +m[4],b=b+ +m[5];d=i.decimalRound(d/x,4);i.decimalRound(b/x,0);f[h]=d}return f};b.prototype.getMaDefaultObj=function(j){for(var a={},e=0;e<j.length;e++)a["ma"+j[e]]=null;return a};b.prototype.getKLineStatus=function(j,
a){var e=j-a;0>e?e="ab":0<e?e="be":0==e&&(e="eq");return e};b.prototype.getData=function(){var j=this.configs.code[0],a=this,e=[];this.getFromWeb(function(c){e[0]=c;2===e.length&&a._tidyData(j,e)},j);this.getFromWeb(function(c){e[1]=c;2===e.length&&e[0]&&a._tidyData(j,e)},j,"currentData")};b.prototype.getStockInfo=function(j){this.on("getStockNameInfo",function(a){j(a)})};return b});v("barBuilder",["arrayToolkit"],function(b){function i(d){return"function"===typeof d?d:function(){return d}}function d(d){return d[0]}
function g(d){return d[1]}function l(d,h){2>arguments.length&&(h=0.5);return(d>>0)+h}function n(d,h,c,k,f,i,g,b){for(var j=0;j<h.length;j++){var a=h[j].length,e=-1,K;for(c.beginPath();++e<a;)c.rect(l((K=h[j][e])[0],d),l(K[1],d),k,K[3]);c.fillStyle=f[j][1];c.fill();if(1!==k&&g)c.lineWidth=b,c.strokeStyle=i[j][1],c.stroke()}}function o(){var m=n,h="canvas",c=1,k=1,f="black",s="",q=[],r=[],j=[],a=[],e=[],K,J=d,B=g,t=d,x=g,S=d,P=g,D=g,y=function(d){var g=i(J),b=i(B),n=i(t),p=i(x),o=i(S),F=i(P),G=i(D),
H=[],z=-1,M=d.length;if(s){for(var w=0;w<q.length;w++)e[w]=[],j[w]=[];for(;++z<M;)w=d[z],w[s]==q[0][0]?(e[0].push([+g(w,z),+b(w,z),+n(w,z),+p(w,z)]),j[0].push([l(+o(w,z)),l(+F(w,z)),l(+G(w,z))])):w[s]==q[1][0]?(e[1].push([+g(w,z),+b(w,z),+n(w,z),+p(w,z)]),j[1].push([l(+o(w,z)),l(+F(w,z)),l(+G(w,z))])):3===q.length&&w[s]==q[2][0]&&(e[2].push([+g(w,z),+b(w,z),+n(w,z),+p(w,z)]),j[2].push([l(+o(w,z)),l(+F(w,z)),l(+G(w,z))])),a.push([l(+o(w,z)),l(+F(w,z)),l(+G(w,z))]),H.push([+g(w,z),+b(w,z),+n(w,z),+p(w,
z)])}else{for(;++z<M;)w=d[z],H.push([+g(w,z),+b(w,z),+n(w,z),+p(w,z)]);e=H}H.length&&(d=K,"canvas"===h?(H=H[0][2],g=1===H||0===k%2||0===c?0:0.5,0===r.length&&(r=[["a",f],["a",f],["a",f]]),d.save(),m(g,e,d,H,q,r,c,k,f,j),d.restore()):"svg"===h&&m(H));return y};y.x=function(a){J=a;return y};y.y=function(a){B=a;return y};y.width=function(a){t=a;return y};y.height=function(a){x=a;return y};y.ctx=function(a){h="canvas";K=a;return y};y.strokeStyle=function(a){"boolean"===typeof a?c=a?1:0:f=a;return y};
y.lineWidth=function(a){a?k=a:c=0;return y};y.fillStyle=function(){return y};y.canvasBarTemplate=function(a){h="canvas";m="function"===typeof a?a:b.map(p,a);return y};y.barColor=function(a){if(3>a.length)throw Error("infinite array");s=a.shift();q=a;return y};y.barBorderColor=function(a){if(3>a.length)throw Error("infinite array");r=a;return y};y.lineX=function(a){S=a;return y};y.lineYTop=function(a){P=a;return y};y.lineYBottom=function(a){D=a;return y};y.linePosOnkLine=function(){return a};return y}
var p={kBar:n,kLine:function(d,h,c,k,f,i,g,b,j,a){if(1===k){for(d=0;d<a.length;d++){var h=a[d].length,k=-1,e;for(c.beginPath();++k<h;)c.moveTo(l((e=a[d][k])[0]),l(e[1])),c.lineTo(l(e[0]),l(e[2]));c.closePath();c.strokeStyle=f[d][1];c.stroke()}return!0}e=a.length;for(j=0;j<e;j++){c.beginPath();for(var K=a[j].length,J,B=-1;++B<K;)c.moveTo((J=a[j][B])[0],J[1]),c.lineTo(J[0],J[2]);c.strokeStyle=i[j][1];c.stroke();c.closePath()}for(a=0;a<h.length;a++){J=h[a].length;e=-1;var t;for(c.beginPath();++e<J;)c.rect(l((t=
h[a][e])[0],d),l(t[1],d),k,t[3]>>0);c.fillStyle=f[a][1];c.fill();if(1!==k&&g)c.lineWidth=b,c.strokeStyle=i[a][1],c.stroke()}}};return function(){return o()}});v("scale",[],function(){return function(){function b(g){if("object"==typeof g&&!g)return null;if(isNaN(i[0])||isNaN(i[1]))return 0;var b=(d[1]-d[0])/(i[1]-i[0]);isFinite(b)||(b=0);return b*g+(d[0]-b*i[0])}var i,d,g,l,n,o;b.domain=function(d,l){if(0==arguments.length&&i)return i;if(2==arguments.length)if(g=l,l){var h=+l,c=d[0],c=Math.max(Math.abs(d[1]-
h),Math.abs(c-h));i=[h-c,h+c]}else b.domain(d);else g=null,i=(isNaN(d[0])||!isFinite(d[0])||0==d[0])&&(isNaN(d[1])||!isFinite(d[0])||0==d[1])?[0,1]:d;return b};b.range=function(i){if(0==arguments.length&&d)return d;d=i;return b};b.ticks=function(d,b){var h=+g;h&&(d=(d||5)%2?d:d+1);for(var c=(i[1]-i[0])/(d-1),k=0,f=[],l=(d-1)/2;k<d;k++)k==d-1?f.push(b?i[1].toFixed(b):i[1]):0==k?f.push(b?i[0].toFixed(b):i[0]):h&&k==l?f.push(b?h.toFixed(b):h):f.push(b?(i[0]+c*k).toFixed(b):i[0]+c*k);return f};b.reverse=
function(b){var g=(d[1]-d[0])/(i[1]-i[0]);return(b-(d[0]-g*i[0]))/g};b.rangeRoundBands=function(d,i){1>arguments.length&&(d=0);2>arguments.length&&(i=d);for(var h=this.domain(),c=this.range(),h=h[1]-h[0]+1>>0,k=-1,f=[];++k<h;)f.push(k);var k=c[1]<c[0],f=c[k-0],c=c[1-k],g=Math.floor((c-f)/(h-d+2*i)),q=f+Math.round((c-f-(h-d)*g)/2),r=[],j=0;for(r.push(q);++j<h;)r.push(q+j*g);l=r;k&&l.reverse();o=g*d;n=Math.floor(g*(1-d));2>o&&(o=2,n=Math.floor((c-f-o-o*h)/(2+h)));1>=n&&(o=0,n=1);return b};b.barRangeBand=
function(){return n};b.barRange=function(){return l};b.barPadding=function(){return o};return b}});v("Grid",[],function(){var b=function(i,d,g,b){b={grid:{x:50,y:20,width:420,height:320,color:"#ddd",margin:5,offsetLeft:b}};this.context=i;this.options=d||b;this.callback=g};b.prototype.draw=function(){var i=this.options.grid||{},d=(i.x>>0)+0.5,g=(i.y>>0)+0.5,b=i.width,n=i.height,o=i.xsize||5,p=b/o,m=this.context,h=[],c=[];m.beginPath();m.strokeStyle="#ddd";for(var k=0,f;k<i.pos.length;k++)f=(i.pos[k]>>
0)+0.5,m.moveTo(d,f),m.lineTo(d+b,f),h.push([d,f]);m.stroke();m.beginPath();for(k=0;k<=o;k++)f=(d+p*k>>0)+0.5,m.moveTo(f,g),m.lineTo(f,g+n),c.push([f,g+n]);m.stroke();m.beginPath();m.strokeStyle="#555";for(k=0;k<h.length;k++)i.showTextLine&&(m.moveTo(d-3,h[k][1]),m.lineTo(d,h[k][1])),m.moveTo(d+b,h[k][1]),m.lineTo(d+b,h[k][1]);for(k=0;k<c.length;k++)o=c[k][0],m.moveTo(o,c[k][1]),i.showTextLine?m.lineTo(o,c[k][1]+3):m.lineTo(o,c[k][1]);m.stroke();m.strokeStyle=i.color;i.topBorder?(m.moveTo(d,g),m.lineTo(d,
g+n),m.lineTo(d+b,g+n),m.lineTo(d+b,g)):m.strokeRect(d,g,b,h[0][1]-h[h.length-1][1]+20);m.stroke();return{context:this.context,leftAxisPos:h,bottomAxisPos:c}};b.prototype.measureText=function(b){var d=document.createElement("div"),g="object"==typeof b?b.join("<br />"):b;d.innerHTML=g;d.style.position="absolute";d.style.top="-999px";document.body.appendChild(d);g=d.clientWidth;b=d.clientHeight/("object"==typeof b?b.length:1);document.body.removeChild(d);return{width:g,height:b}};b.prototype.genTicks=
function(b){var d=this.options.grid.tickDecimals,g=0,d="number"==typeof d?d:2;this.ticks=this.options.grid.scale[1].ticks(b||7,2);for(b=this.ticks.length;g<b;g++)this.ticks[g]=(+this.ticks[g]).toFixed(d);return this.ticks};b.prototype.setTicks=function(b){this.ticks=b};b.prototype.getTicks=function(){return this.ticks};b.prototype.parseAxis=function(b,d){var g=[],l,n;for(l=0;l<b.length;++l)(n=b[l])&&(g["x"+n.n]=n.c2p(pos.left));for(l=0;l<d.length;++l)(n=d[l])&&n.used&&(g["y"+n.n]=n.c2p(pos.top));
if(void 0!==g.x1)g.x=g.x1;if(void 0!==g.y1)g.y=g.y1;return g};b.prototype.drawAxis=function(b){var d=b.direction,g=b.position,l=b.autoIndent,n=b.formatter,o=b.type,p="y"==d?this.draw().leftAxisPos:this.draw().bottomAxisPos,m=this.measureText(p),h=m.width,h=m.height,m=document.createElement("div"),c=document.createElement("div"),k=this.genTicks(p.length),f=0;m.className=b.cls||"";if("x"==d){if("bottom"==g){b=b.xText||["09:30","10:30","11:30/13:00","14:00","15:00"];for(f=0;f<b.length;f++)c=document.createElement("div"),
c.style.position="absolute",c.style.top=p[f][1]+"px",c.style.left=p[f][0]+"px",c.innerHTML=b[f],c.style.width=(h=this.measureText(b[f]).width)+"px",l?c.style.marginLeft=0==f?0:f==b.length-1?-h+"px":-h/2+"px":"fiveday"==o?(c.style.width=this.options.grid.width/5+"px",c.style.textAlign="center"):c.style.marginLeft=-h/2+"px",m.appendChild(c)}}else for(f=0;f<p.length;f++){c=document.createElement("div");c.style.position="absolute";l?c.style.top=f==p.length-1?p[f][1]+"px":0==f?p[f][1]-h+"px":p[f][1]-h/
2+"px":(c.style.top=p[f][1]-h/2+"px",c.style.right=5+ +this.options.grid.panel.offsetWidth-this.options.grid.x+"px");if("right"==g)c.style.left=5+this.options.grid.width+this.options.grid.x+"px";c.innerHTML=n?n(k[f]):k[f];m.appendChild(c)}this.options.grid.panel.parentNode.appendChild(m)};b.prototype.updateAxis=function(){};return b});v("kgrid",["require","Grid"],function(b){var b=T("Grid"),i=function(){b.apply(this,arguments)};i.prototype=new b;i.prototype.draw=function(){var d=this.options.grid||
{},b=(d.x>>0)+0.5,i=(d.y>>0)+0.5,n=d.width,o=d.height,p=this.context,m=[],h=[];p.beginPath();p.strokeStyle="#ccc";for(var c=0,k;c<d.pos.length;c++)k=(d.pos[c]>>0)+0.5,p.moveTo(b,k),p.lineTo(b+n,k),m.push([b,k]);p.stroke();p.beginPath();k=[1/6,0.5,5/6];for(var c=0,f;c<k.length;c++)f=d.xTextPos?d.xTextPos[c]:(b+n*k[c]>>0)+0.5,h.push([f,i+o]);p.stroke();p.beginPath();p.strokeStyle="#ccc";for(c=0;c<m.length;c++)p.moveTo(b+n,m[c][1]),p.lineTo(b+n+3,m[c][1]);if(d.showTextLine)for(c=0;c<h.length;c++)k=h[c][0],
p.moveTo(k,h[c][1]),p.lineTo(k,h[c][1]+3);p.stroke();p.strokeStyle=d.color;p.moveTo(b,i+o);p.lineTo(b+n,i+o);p.stroke();return{context:this.context,leftAxisPos:m,bottomAxisPos:h}};return i});v("dashedLine",[],function(){var b=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;if(b&&b.lineTo)b.dashedLine=function(b,d,g,l,n){n||(n=[2,5]);this.save();var g=g-b,o=l-d,l=Math.sqrt(g*g+o*o),g=Math.atan2(o,g);this.translate(b,d);this.moveTo(0,0);this.rotate(g);d=n.length;g=0;o=!0;for(b=0;l>
b;)b+=n[g++%d],b>l&&(b=l),o?this.lineTo(b,0):this.moveTo(b,0),o=!o;this.restore()}});v("canvasLine",["arrayToolkit"],function(b){function i(d){return"function"===typeof d?d:function(){return d}}function d(d){return d[0]}function g(d){return d[1]}function l(d){return!d?null:(d>>0)+0.5}function n(d,h){var c=0,k=d.length,f=d[0];if(isNaN(f[1]))for(var b=1;b<d.length;b++)if(!isNaN(d[b][1])){f=d[b];c=b;break}for(h.moveTo(f[0],f[1]);++c<k;)h.lineTo(d[c][0],d[c][1])}function o(){var m=n,h=0,c="black",k="rgba(232, 244, 233, .5)",
f,s,q=[],r=d,j=g,a=function(a){for(var d=i(r),b=i(j),B=[],t=-1,x=a.length,g;++t<x;)g=a[t],b(g,t)?B.push([l(d(g,t)),l(b(g,t))]):B.push([0]);if(B.length)a=s,a.beginPath(),a.strokeStyle=c,m(B,a,h,k,f),a.stroke();q=B.slice(0);return B};a.x=function(e){r=e;return a};a.y=function(e){j=e;return a};a.y0=function(e){h=e;return a};a.bottom=function(e){f=e;return a};a.ctx=function(e){s=e;return a};a.strokeStyle=function(e){c=e;return a};a.fillStyle=function(e){k=e;return a};a.canvasLineTemplate=function(e){m=
"function"===typeof e?e:b.map(p,e);return a};a.linePos=function(){return q};return a}var p={linear:n,"linear-closed":function(d,h,c,k){var f=d.length;n(d,h);h.lineTo(d[f-1][0],c);h.lineTo(d[0][0],c);h.fillStyle=k;h.fill()},"linear-bar":function(d,h,c,k,f){var c=0,k=d.length,b=d[0],g;h.moveTo(b[0],b[1]);for(h.lineTo(b[0],f);++c<k;)h.beginPath(),h.moveTo((g=d[c])[0],g[1]),h.lineTo(g[0],f),h.strokeStyle=d[c][1]>d[c-1][1]?"#D85342":"#6CA584",h.closePath(),h.stroke()},"linear-bar-macd":function(d,h,c,
k,f){var c=0,k=d.length,b=d[0],g;h.moveTo(b[0],b[1]);for(h.lineTo(b[0],f);++c<k;)h.beginPath(),h.moveTo((g=d[c])[0],g[1]),h.lineTo(g[0],f),h.strokeStyle=d[c][1]<f?"#D85342":"#6CA584",h.closePath(),h.stroke()}};return function(){return o()}});v("techCal",["arrayToolkit","mathToolkit"],function(b,i){function d(j,a,e){if(0==j.length||!j)return null;for(var c=[],f=j.length,d={},k=0,h=d=0,b=0;b<f;b++){if(b<a)d=j[b],d=+("number"==e?d:d.c),k+=d;else{h=b-a+1;for(k=0;h<=b;h++)d=j[h],d=+("number"==e?d:d.c),
k+=d}h=k/a;c.push(h)}return c}function g(j,a,e){return(2*j+(e-1)*(a||0))/(e+1)}function l(j,a){return+j>+a?+j:+a}function n(j){return Math.abs(+j)}function o(j,a,e,c){return(e*j+(a-e)*c)/a}function p(j){for(var a=0,e,c,d,f,k,h=[],a=0;a<j.length;a++)e=j[a].c,0==a||!e?(f=k=e||0,c=e=f-k,d=0):(f=(2*e+11*f)/13,k=(2*e+25*k)/27,e=f-k,c=(2*e+8*c)/10,d=2*(e-c)),h.push({MACD:d,DEA:c,DIFF:e});return h}function m(){var j=p,a=function(a){var c=[];a.length&&(c=j(a));return c};a.templateName=function(e){j="function"===
typeof e?e:b.map(r,e);return a};return a}var h=function(j){return"function"===typeof j?j:function(a){return a}},c=function(j){return j.c},k=function(j,a){for(var e={},c=0,d=0,f="",c=0;c<j.length;c++)for(d=0;d<a.length;d++)f=a[d]+j[c],e[f]=NaN;return e},f={maxMinDataInRound:function(j,a,e,c){for(var d={},f=0;f<a.length;f++){var k=a[f],h="maxR"+k,b="minR"+k,g=0,i=1E6,l,q;if(e+1<k)break;if(null!==c[h]&&c[h])if(l=j[e].a,q=j[e].i,headA=j[e-k].a,headI=j[e-k].i,headA==c[h]||c[b]==headI)for(var r=0;r<k;r++)l=
j[e-r].a,q=j[e-r].i,g=l>g?l:g,i=q<i?q:i;else g=l>c[h]?l:c[h],i=q<c[b]?q:c[b];else for(r=0;r<k;r++)l=j[e-r].a,q=j[e-r].i,g=l>g?l:g,i=q<i?q:i;d[h]=g;d[b]=i}return d},averageDataInRound:function(j,a,e,c){for(var d={},f,k,h,b,g=0;g<a.length;g++){h=a[g];k="ma"+h;f=0;if(e+1<h)break;if(null!==c[k]&&c[k])f=c[k]*h-j[e-h].c+j[e].c;else for(b=0;b<h;b++)f+=j[e-b].c;d[k]=i.decimalRound(f/h,4)}return d},volStatusInRound:function(j,a,e,c){for(var d={},f,k,h,b,g,i,l,q,r,s=0;s<a.length;s++){g=a[s];h="upVol"+a[s];
b="downVol"+a[s];k=f=0;if(e<g)break;if(null!==c[h]&&c[h])l=j[e].c>j[e-1].c?!0:!1,i=j[e-g].c>j[e-g-1].c?!0:!1,r=c[h],rr2=c[b],q=j[e].n,g=j[e-g].n,i&&l?(f=q+r-g,k=rr2):!i&&l?(f=q+r,k=rr2-g):i&&!l?(f=r-g,k=q+rr2):!i&&!l&&(f=r,k=q+rr2-g);else for(i=0;i<g;i++)j[e-i].c>j[e-i-1].c?f+=j[e-i].n:k+=j[e-i].n;d[h]=f;d[b]=k}return d}},s=function(j,a,e,c){for(var c=k(a,c),d=[],h={},b=0;b<j.length;b++)h=f[e](j,a,b,d[b-1]),d[b]=$.extend({},c,h);return d},q=function(j,a,e,c,d,f){for(var k={},h,b,g,l,q=0;q<a.length;q++){g=
a[q];b=f+g;h=0;if(e+1<g||j.length<g)break;if(null!==c[b]&&c[b])h=c[b]*g-d(j[e-g])+d(j[e]);else for(l=0;l<g;l++)h+=d(j[e-l]);k[b]=i.decimalRound(h/g,4)}return k},r={MACD:p,KDJ:function(j){var a,e=Infinity,c=-Infinity,d,f,k,h,b=[];for(k=0;k<j.length;k++){if(0==k)f=d=100;else{a=j[k].c;e=Infinity;c=-Infinity;for(h=9<k?k-9:0;h<(9<k?k:9);h++)e>j[h].i&&(e=j[h].i),c<j[h].a&&(c=j[h].a);a=100*((a-e)/(c-e));d=(a+2*d)/3;f=(d+2*f)/3}a=3*d-2*f;0>d&&(d=0)||100<d&&(d=100);0>f&&(f=0)||100<f&&(f=100);0>a&&(a=0)||100<
a&&(a=100);b.push({K:d,D:f,J:a})}return b},RSI:function(j){var a,e,c,d,f,k,h,b,g,i,q=[];for(i=0;i<j.length;i++)a=j[i].c,0==i?d=k=g=c=f=b=0:(e=j[i-1].c,c=o(l(a-e,0),6,1,c),d=o(n(a-e),6,1,d),f=o(l(a-e,0),12,1,f),k=o(n(a-e),12,1,k),b=o(l(a-e,0),24,1,b),g=o(n(a-e),24,1,g)),a=100*(c/d),e=100*(f/k),h=100*(b/g),q.push({RSI6:a,RSI12:e,RSI24:h});return q},BOLL:function(j){var a,e,c,d,f=[],k,h=0;for(d=0;d<j.length;d++){a=j[d].c;h+=a;if(20<d){a=h/20;c=0;for(e=d-20;e<d;e++)k=j[e].c-a,c+=k*k;c=Math.sqrt(c/20);
e=a+2*c;c=a-2*c;h-=j[d-20].c}else a=e=c=NaN;f.push({MID:a,UPPER:e,LOWER:c})}return f},PSY:function(j){var a={},e,c,d=j.length,f=[],k,h;for(k=1;k<d;k++)if(a=k-12+1,!(0>a)){c=0;for(h=a;h<k;h++){a=j[h-1];e=j[h];if(!e||!a)break;e.c>a.c&&c++}c=100*(c/12);f.push({PSY:c})}return f},MFI:function(j){for(var a={},e=0,c=[],d=[],k=0;k<j.length;k++)a=j[k],e=a.a+a.i+a.c,c.push(e);for(var f=0,f=-1,a=f=0,k=[],h=[],b=1;b<j.length;b++)e=c[b],a=j[b],f=e>c[b-1]?e*a.n:0,a=e<c[b-1]?e*a.n:0,k.push(f),h.push(a);for(var b=
e=0,c=[],g=0;g<j.length;g++){f=g-14;if(0>f)f=k[g],a=h[g],e+=f,b+=a;else for(var b=e=0,i=f;i<g;i++)f=k[i],a=h[i],e+=f,b+=a;f=0!=b?e/b:0;c.push(f)}for(k=h=0;k<j.length;k++)f=c[k],h=0!=f+1?100-100/(f+1):100,d.push({MFI:h});return d},ADTM:function(j){for(var a=0,e=0,c=[],f=[],k={},h=[],b=1;b<j.length;b++)k=j[b],a=k.o<=j[b-1].o?0:Math.max(k.a-k.o,k.o-j[b-1].o),e=k.o>=j[b-1].o?0:Math.max(k.o-k.i,k.o-j[b-1].o),c.push(a),f.push(e);for(var e=a=0,b=[],k=[],g=0,i=0,a=-1,l=0;l<j.length;l++){a=l-23;if(0>a)a=c[l],
e=f[l],g+=a,i+=e;else for(var g=i=0,q=a;q<l;q++)a=c[q],e=f[q],g+=a,i+=e;b.push(g);k.push(i)}a=f=0;c=[];e=[];for(g=0;g<j.length;g++)a=b[g],e=k[g],f=a>e?(a-e)/a:a==e?0:(a-e)/e,c.push(f);e=d(c,8,"number");for(b=0;b<j.length;b++)f=c[b],a=e[b],h.push({ADTM:f,MAADTM:a});return h},ROC:function(c){for(var a=[],e=[],k=[],f={},e=f=0;e<c.length;e++)f=c[e],12<=e?(f=100*((f.c-c[e-12].c)/c[e-12].c),a.push(f)):a.push(!1);e=d(a,6,"number");for(f=0;f<c.length;f++)k.push({ROC:a[f],ROCMA:e[f]});return k},BBI:function(c){var a=
[];if(c&&0!=c.length){var e={},f,k=d(c,3),h=d(c,6),b=d(c,12);d(c,24);for(var g=0;g<c.length;g++)e=c[g],f=(k[g]+h[g]+b[g]+b[g])/4,f=isNaN(f)?e.c:f,a.push({BBI:f,A:e.c});return a}},ARBR:function(c){for(var a=0,e={},f=[],k=[],d=a=0,h=[],b=1;b<c.length;b++)e=c[b],a=e.a-c[b-1].c,d=c[b-1].c-e.i,f.push(isNaN(a)?0:a),k.push(isNaN(d)?0:d);for(var g=e=0,i=[],l=a=a=0;l<c.length;l++){if(10>b)a=f[l],d=k[l],e+=a,g+=d;else for(var a=l-10,g=e=0,q=a;q<l;q++)a=f[q],d=k[q],e+=a,g+=d;a=0!=g?100*(e/g):0;i.push(a)}e=a=
0;f=[];k=[];for(b=1;b<c.length;b++)e=c[b],a=Math.max(0,e.a-e.o),e=Math.max(0,e.o-e.i),f.push(isNaN(a)?0:a),k.push(isNaN(e)?0:e);b=[];for(l=g=e=d=a=0;l<c.length;l++){if(10>l)a=f[l],d=k[l],e+=a,g+=d;else{a=l-10;g=e=0;for(q=a;q<l;q++)a=f[q],d=k[q],e+=a,g+=d}a=0!=g?100*(e/g):0;b.push(a)}for(f=0;f<c.length;f++)h.push({AR:i[f],BR:b[f],A:50,B:150});return h},EMV:function(c){if(c&&0!=c.length){for(var a,e=[],f=a=0,k=[],h=[],f={},b=0;b<c.length;b++)f=c[b],a=f.n,e.push(a),a=f.a+f.i,f=f.a-f.i,k.push(a),h.push(f);
var e=d(e,14,"number"),b=d(h,14,"number"),g=0;a=[];for(var i=g=0;i<c.length;i++)f=c[i],g=0<i?k[i-1]:f.a+f.i,g=100*((f.a+f.i-g)/(f.a+f.i)),a.push(g);for(var f=0,k=[],l=0,q=0,i=0;i<c.length;i++)f=c[i],g=a[i],l=e[i]/f.n,f=h[i],q=b[i],f=0!=q?g*l*f/q:0,k.push(f);h=d(k,14,"number");f=d(h,9,"number");b=e=0;a=[];for(k=0;k<c.length;k++)e=h[k],b=f[k],a.push({EMV:e,MAEMV:b,A:0});return a}},LWR:function(c){for(var a,e=0,f=0,k=0,d,h,b,g,i,l,q=[],e=0;e<c.length;e++){var r=c[e];a=r.c;d=e-9+1;0>d&&(d=0);if(0==e)b=
c[d].i,g=c[d].a,k=f=0;else{if(f<d){b=Infinity;for(h=d;h<=e;h++)if(c[h].i<b)b=c[h].i,f=h}else if(r.i<b)b=r.i,f=e;if(k<d){g=-Infinity;for(h=d;h<=e;h++)if(c[h].a>g)g=c[h].a,k=h}else if(r.a>g)g=r.a,k=e}a=100*((g-a)/(g-b));0==e?l=i=a:(i=(1*a+2*i)/3,l=(1*i+2*l)/3);q.push({LWR1:i,LWR2:l,A:20,B:80})}return q},DPO:function(c){if(c&&0!=c.length){for(var a={},e=[],f=[],k=[],a=[],h=[],b=0;b<c.length;b++)a=c[b],e.push(a.c);e=d(e,20,"number");for(a=0;a<c.length;a++)b=a-10,0>b?f.push(!1):(b=e[b],f.push(b));for(e=
0;e<c.length;e++)a=c[e],b=f[e],b=a.c-b,k.push(b),a=d(k,6,"number"),a=a[e],h.push({DPO:b,MADPO:a});return h}},"W&R":function(c){for(var a=[6,10],e="maxR"+a[0],f="minR"+a[0],k="maxR"+a[1],d="minR"+a[1],a=s(c,a,"maxMinDataInRound",["maxR","minR"]),h=[],b={},g=0,i=0,l=0;l<a.length;l++)b=a[l],b[e]&&(g=100*(b[e]-c[l].c)/(b[e]-b[f])),b[k]&&(i=100*(b[k]-c[l].c)/(b[k]-b[d])),h.push({WR1:i,WR2:g});return h},ASI:function(c){for(var a=[],e,f=[],k=0,d=0,d=0,h=[],b,g,q,r,s,m,o,p,E,u,C=e=0;C<c.length;C++){b=c[C-
1];g=c[C];e=d=k=0;if(b)e=b.c,o=b.o,m=b.i,r=g.a,s=g.i,b=g.c,q=g.o,g=n(r-e),s=n(s-e),m=n(r-m),r=n(e-o),p=s>m&&s>g,E=s+g/2+r/4,u=m+r/4,p=p?E:u,m=g>s&&g>m,r=g+s/2+r/4,r=m?r:p,e=b-e+(b-q)/2+e-o,o=l(g,s),e=16*e/r*o;a.push(e);if(26>C)h.push({ASI:0,ASIT:0});else{for(e=0;26>e;e++)k+=a[C-e];f.push(k);if(36>C)h.push({ASI:k,ASIT:0});else{for(e=0;10>e;e++)d+=f[C-26-e];d/=10;h.push({ASI:i.decimalRound(k,2),ASIT:i.decimalRound(d,2)})}}}return h},BIAS:function(c){for(var a=0,e=0,f=0,k={},d=[],k=[6,12,24],b="ma"+
k[0],h="ma"+k[1],g="ma"+k[2],i=s(c,k,"averageDataInRound",["ma"]),l=0;l<i.length;l++)k=i[l],k[b]&&(a=100*((c[l].c-k[b])/k[b]),k[h]&&(e=100*((c[l].c-k[h])/k[h]),k[g]&&(f=100*((c[l].c-k[g])/k[g])))),d.push({BIAS:a,BIAS2:e,BIAS3:f});return d},VR:function(c){for(var a=[26],e="upVol"+a[0],f="downVol"+a[0],k=[],d=NaN,a=s(c,a,"volStatusInRound",["upVol","downVol"]),b=0;b<c.length;b++)a[b][e]&&(d=100*(a[b][e]/a[b][f])),k.push({VR:d,A:100,B:200});return k},CCI:function(c){var a,e,f,d=[],b=[],g=[];a={};for(var l=
[14],q=["ma"],r=k(l,q),s=h(),m=0;m<c.length;m++){a=c[m].a;e=c[m].i;f=c[m].c;a=(a+e+f)/3;g.push(a);a=g;e=l;f=m;for(var o=b[m-1],p=s,A=q[0],E={},u=void 0,C=void 0,F=void 0,G=void 0,C=u=void 0,H=0;H<e.length;H++){F=e[H];C=A+F;u=0;if(f+1<F)break;if(null!==o[C]&&o[C])u=o[C]*F-p(a[f-F])+p(a[f]);else for(G=0;G<F;G++)u+=p(a[f-G]);E[C]=i.decimalRound(u/F,4);u=E[C];for(G=C=0;G<F;G++)C+=n(a[f-G]-u);C=0.015*(C/F);E.r=i.decimalRound((p(a[f])-u)/C,3)}a=E;b[m]=$.extend({},r,a);a=b[m].r?b[m].r:NaN;d.push({CCI:a,
A:100,B:-100})}return d},MTM:function(c){for(var a=[],e,f=[],b,d=[],g=[6],i=["ma"],l=k(g,i),r=h(),s=0;s<c.length;s++)0>s-12?a.push({MTM:NaN,MAMTM:NaN}):(b=c[s].c,e=c[s-12].c,e=b-e,f.push(e),roundObj=q(f,g,s-12,d[s-1],r,i[0]),d[s]=$.extend({},l,roundObj),a.push({MTM:e,MAMTM:d[s].ma6}));return a},CYS:function(c){for(var a,e,f,k=[],d=[],b=[],h=0;h<c.length;h++)a=c[h].np,e=c[h].n,f=c[h].c,0===h&&k.push({CYS:NaN}),d[h]=g(a,d[h-1],13),b[h]=g(e,b[h-1],13),a=d[h]/b[h],f=100*((f-a)/a),k.push({CYS:f});return k},
OBV:function(c){for(var a,e,f,k,d=[0],b=[],h=0;h<c.length;h++)0===h?b.push({OBV:NaN}):(e=c[h-1].c,a=c[h].c,f=c[h].n,k=a<e?-f:0,a=a>e?f:k,a=d[h-1]+a,d.push(a),b.push({OBV:d[h]/1E4}));return b},DMA:function(f){var a;a={};for(var e={},d=[],b=[],g=[],l=["ma","ma"],r=[10,50],s=l[0]+r[0],m=l[1]+r[1],n=h(),o=k(r,l),p=k([10],["ma"]),L=[],A=0;A<f.length;A++){a=f;for(var e=r,E=A,u=d[A-1],C=c,F=l[0],G={},H=void 0,z=void 0,M=void 0,w=void 0,v=0;v<e.length;v++){M=e[v];z=F+M;H=0;if(E+1<M||a.length<M)break;if(null!==
u[z]&&u[z])H=u[z]*M-C(a[E-M])+C(a[E]);else for(w=0;w<M;w++)H+=C(a[E-w]);G[z]=i.decimalRound(H/M,4)}a=G;d[A]=$.extend({},o,a);a=d[A][s]-(d[A][m]?d[A][m]:0);g.push(a);e=q(g,[10],A,b[A-1],n,"ma");b[A]=$.extend({},p,e);L.push({DDD:a,AMA:b[A].ma10})}return L},TRIX:function(c){var a,e=[],f=[],d=[],b=[],i=[],l=[];a={};for(var r=[20],s=["ma"],m=k(r,s),n=h(),o=0;o<c.length;o++)a=c[o].c,a=g(a,e[o-1],12),e.push(a),a=g(a,f[o-1],12),f.push(a),a=g(a,d[o-1],12),d.push(a),TRIX=100*((a-d[o-1])/d[o-1]),b.push(TRIX),
a=q(b,r,o,l[o-1],n,s[0]),l[o]=$.extend({},m,a),i.push({TRIX:TRIX,TRMA:l[o].ma20});return i},SKDJ:function(c){var a=[],e=[],f,d=[],b=[],i;f={};for(var l,r=[],s=[9],m=k(s,["maxR","minR"]),n=k([3],["ma"]),o=h(),p=0;p<c.length;p++)if(c[0]){i=c[p].c;f=c;l=s;for(var A=p,E=e[p-1],u={},C=0;C<l.length;C++){var F=l[C],G="maxR"+F,H="minR"+F,z=0,M=1E6,w,v;if(A+1<F)break;if(null!==E[G]&&E[G])if(w=f[A].a,v=f[A].i,headA=f[A-F].a,headI=f[A-F].i,headA==E[G]||E[H]==headI)for(var R=0;R<F;R++)w=f[A-R].a,v=f[A-R].i,z=
w>z?w:z,M=v<M?v:M;else z=w>E[G]?w:E[G],M=v<E[H]?v:E[H];else for(R=0;R<F;R++)w=f[A-R].a,v=f[A-R].i,z=w>z?w:z,M=v<M?v:M;u[G]=z;u[H]=M}f=u;e[p]=$.extend({},m,f);l=e[p].maxR9;f=e[p].minR9;if(!l)l=c[p].a,f=c[p].i;i=100*((i-f)/(l-f));i=g(i,d[p-1],3);d.push(i);i=g(i,b[p-1],3);b.push(i);f=q(b,[3],p,r[p-1],o,"ma");r[p]=$.extend({},n,f);a.push({K:i,D:r[p].ma3})}return a},CR:function(c){for(var a,e,f,d,b=[],g=[],i={},r={},s=[],m=[],n=[],o=[],i=d=0,p=h(),A=[5,10,20],v=k(A,["ma","ma","ma"]),u=0;u<c.length;u++){i=
d=0;r={};a=c[u].c;f=c[u].a;e=c[u].i;a=(f+e+a)/3;s.push(a);isNaN(s[u-1])?f=e=0:(e=l(0,s[u-1]-e),f=l(0,f-s[u-1]));m.push(e);n.push(f);e=26>n.length?n.length:26;for(f=0;f<e;f++)d+=n[u-f],i+=m[u-f];d=0===i?NaN:100*(d/i);o.push(d);i=q(o,A,u,g[u-1],p,"ma");g[u]=$.extend({},v,i);r.CR=d;r.MA1=g[u-3]?g[u-3].ma5:NaN;r.MA2=g[u-5]?g[u-5].ma10:NaN;r.MA3=g[u-9]?g[u-9].ma20:NaN;b.push(r)}return b},DMI:function(c){var a,e,f,k,d,b,h=[],g=[],i=[],q=[],r=[],s=[];h.push({ADX:NaN,DI1:NaN,DI2:NaN,ADXR:NaN});for(var m=
1;m<c.length;m++)if(f=c[m-1].c,a=c[m-1].a,e=c[m-1].i,b=c[m].a,d=c[m].i,k=l(b-d,n(b-f)),f=n(d-f),k=l(k,f),g.push(k),a=b-a,e-=d,d=0<a&&a>e?a:0,i.push(d),e=0<e&&e>a?e:0,q.push(e),14<=g.length){e=m;d=r;a=s;b={};k=0;var o=f=void 0,p=f=0;if(d)var u=d.length;for(o=o=0;14>o;o++)k+=g[e-o-1],f+=i[e-o-1],p+=q[e-o-1];DI1=100*f/k;DI2=100*p/k;b.tempADX=100*(n(DI2-DI1)/(DI1+DI2));b.DI1=DI1;b.DI2=DI2;b.ADX=NaN;b.ADXR=NaN;if(20<=e){o=b.tempADX;for(f=0;5>f;f++)o+=d[u-f-1];b.ADX=o/6;b.ADXR=(b.ADX+a[a.length-6])/2}e=
b;r.push(e.tempADX);s.push(e.ADX);h.push({ADX:e.ADX,DI1:e.DI1,DI2:e.DI2,ADXR:e.ADXR})}else h.push({ADX:NaN,DI1:NaN,DI2:NaN,ADXR:NaN});return h}};return function(){return m()}});v("fixSupportCanvas",[],function(){return function(b){if(!Object.prototype.getContext&&window.G_vmlCanvasManager)b.getContext=window.G_vmlCanvasManager.initElement(b).getContext}});v("detectPR",["fixSupportCanvas"],function(b){return function(i){window.globalDetectList=window.globalDetectList||{};if(!globalDetectList[i]){globalDetectList[i]=
!0;i=document.getElementById(i);b(i);var d=i.getContext("2d"),g=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1),l,n;if(1!==g)l=i.width,n=i.height,i.width=l*g,i.height=n*g,i.style.width=l+"px",i.style.height=n+"px",d.scale(g,g)}}});v("techConfig",[],function(){return{MACD:{MACD:"",DEA:"#ff0045",DIFF:"#1478fd"},KDJ:{K:"#1478fd",D:"#ff0045",J:"#9966dd"},RSI:{RSI6:"#1478fd",RSI12:"#ff0045",
RSI24:"#9966dd"},BOLL:{MID:"#1478fd",UPPER:"#ff0045",LOWER:"#9966dd"},MTM:{MTM:"#1478fd",MAMTM:"#ff0045"},BIAS:{BIAS3:"#1478fd",BIAS12:"#ff0045",BIAS24:"#9966dd"},CCI:{CCI:"#1478fd"},SKDJ:{K:"#1478fd",D:"#ff0045"},DMA:{DDD:"#1478fd",AMA:"#ff0045"},"W&R":{WR1:"#1478fd",WR2:"#ff0045"},DMI:{DI1:"#1478fd",DI2:"#ff0045",ADX:"#9966dd",ADXR:"#e89055"},CR:{CR:"#1478fd",MA1:"#ff0045",MA2:"#9966dd",MA3:"#e89055"},TRIX:{TRIX:"#1478fd",TRMA:"#ff0045"},OBV:{OBV:"#1478fd"},CYS:{CYS:"#1478fd"},PSY:{PSY:"#1478fd"},
MFI:{MFI:"#1478fd"},VR:{VR:"#1478fd"},ASI:{ASI:"#1478fd",ASIT:"#ff0045"},ADTM:{ADTM:"#1478fd",MAADTM:"#ff0045"},ROC:{ROC:"#1478fd",ROCMA:"#ff0045"},BBI:{BBI:"#1478fd",A:"#ff0045"},ARBR:{AR:"#1478fd",BR:"#ff0045"},EMV:{EMV:"#1478fd",MAEMV:"#ff0045"},DPO:{DPO:"#1478fd",MADPO:"#ff0045"},LWR:{LWR1:"#1478fd",LWR2:"#ff0045"},defaultColor:"#555"}});v("drawKLine","arrayToolkit,barBuilder,scale,kgrid,dashedLine,canvasLine,techCal,detectPR,fixSupportCanvas,techConfig,hexinStock/util".split(","),function(b,
i,d,g,l,n,o,p,m,h,c){return function(k,f,l,q){function r(a){x.clearRect(0,0,K,J);var c,f;for(f in a[0])"MACD"==f?c=n().x(function(a,c){return I(c)+I.barPadding()/2+I.barRangeBand()/2}).y(function(a){return U(a[f])}).canvasLineTemplate("linear-bar-macd").strokeStyle("#1FA3C9").bottom(U(0)).ctx(x):(c=h[v][f]||h.defaultColor,c=n().x(function(a,c){return I(c)+I.barPadding()/2+I.barRangeBand()/2}).y(function(a){return U(a[f])}).canvasLineTemplate("linear").strokeStyle(c).ctx(x)),c(a);$.each(U.ticks(3),
function(a,c){$(".indexLabel > div").eq(a).html(c.toFixed(2))})}function j(a){v=a;var c=Array.prototype.concat.call([],q,f);X=o().templateName(a);Y=X(c);Z=Y.slice(-f.length);aa=-Infinity;ba=Infinity;for(N=0;N<Z.length;N++){var a=Z[N],e;for(e in a)aa<a[e]&&(aa=a[e]),ba>a[e]&&(ba=a[e])}U=d().domain([ba,aa]).range([D+u+y+O+2*A,D+u+y+O+A+17]);r(Z)}k=k||$("#tcanvas");k=k.data("klconfig");window.global=window.global||{};global.canvasWidth=global.canvasWidth||document.getElementById("tcanvas").width;global.canvasHeight=
global.canvasHeight||document.getElementById("tcanvas").height;var a=f[0].code.split("_")[0],l=document.getElementById("tcanvas");$(l).siblings(":not(.unRemovePanel, #kTip, #kTipma, #kvolTip, #kTipTime, #kTipPrice, #canvasMask, #kindexTip, .opacity-stock-name)").remove();$("#canvasPanel").unbind().css("font-family","Tahoma");$(l).css({position:"absolute",left:0,top:0});0<!$("#kGridMask").length&&$("#canvasPanel").prepend($('<canvas id="kGridMask" />').css({position:"absolute",left:0,top:0}));k.drawStartFn&&
k.drawStartFn();var e=l.getContext("2d"),K=global.canvasWidth,J=global.canvasHeight;e.clearRect(0,0,K,J);$(l).hide();$(l).show();0<$("#canvasMask").length&&$("#canvasMask").get(0).getContext("2d").clearRect(0,0,K,J);var B=$("#kGridMask").get(0);B.width=K;B.height=J;var t;m(B);t=B.getContext("2d");0<!$("#kTech").length&&$("#canvasPanel").append($('<canvas id="kTech" />').css({position:"absolute",left:0,top:0}));B=$("#kTech").get(0);B.width=K;B.height=J;m(B);var x=B.getContext("2d"),v="MACD";p("tcanvas");
p("kGridMask");p("kTech");var P=k.showIndex,D=19,y=15,O=24,B=!P?20:26,L=J-D-0-y-O-B,A=P?0.2*L>>0:0,E=0.2*L>>0,u=L-A-E,C=19<=f.length?[1/6,0.5,5/6]:[1/6],F={5:"#1F6195",10:"#E0AC58",30:"#9C73AF",60:"#6CA582"},G,H,z,M,w=[],ga=[],R=[],ca,ha=[],da,ia=[],V,N;41==a&&(u=L);var I=d().domain([0,19>=f.length?19:f.length]).range([5,K-52]).rangeRoundBands(0.2),W=d().domain([b.min(f,function(a){return a.n}),1.4*b.max(f,function(a){return a.n})]).range([D+u+y+O+(P?A-2:E),D+u+y+O]),a=function(a){var c,f,e,k=Infinity,
d=-Infinity,b=Infinity,h=-Infinity;for(c=0;c<a.length;c++)for(f in a[c])e=a[c][f],null!=e&&"s"!==f&&"t"!==f&&"n"!==f&&"h"!==f&&"np"!==f&&("o"==f||"a"==f||"i"==f||"c"==f?(d<e&&(d=e,indexmax=c),k>e&&(k=e,indexmin=c)):(h<e&&(h=e),b>e&&(b=e)));h<d&&(h=d);+b>k&&(b=k);return{min:k,max:d,allmin:b,allmax:h,minindex:indexmin,maxindex:indexmax}}(f),L=a.allmin,T=a.allmax,ea=a.minindex,fa=a.maxindex,Q=scaleY=d().domain([L-0.1*(T-L),T+0.2*(T-L)]).range([D+u,D]),X,Y,aa,ba,Z,U=d().domain([ba,aa]).range([D+u+y+O+
2*A,D+u+y+O+A+17]);P&&j($(l).data("techItem")||v);a=function(){var a=i().x(function(a,c){return I(c)+I.barPadding()/2}).y(function(a){return W(a.n)}).width(function(){return I.barRangeBand()}).height(function(a){return W.range()[0]-Math.floor(W(a.n))}).canvasBarTemplate("kBar").lineWidth(1).barColor(["s",["ab","#ec5f4c"],["be","#6ba583"],["eq","#ec5f4c"]]).barBorderColor([["ab","#900f00"],["be","#15713b"],["eq","#900f00"]]).ctx(e),c=i().x(function(a,c){return I(c)+I.barPadding()/2}).y(function(a){return Q(b.max([a.o,
a.c]))}).width(function(){return I.barRangeBand()}).height(function(a){return Math.abs(Q(a.o)-Q(a.c))}).lineX(function(a,c){return I(c)+I.barPadding()/2+I.barRangeBand()/2}).lineYTop(function(a){return Q(a.a)}).lineYBottom(function(a){return Q(a.i)}).canvasBarTemplate("kLine").lineWidth(1).barColor(["s",["ab","#ec5f4c"],["be","#6ba583"],["eq","#ec5f4c"]]).barBorderColor([["ab","#900f00"],["be","#15713b"],["eq","#900f00"]]).ctx(e);c(f);a(f);V=c.linePosOnkLine();window.kLinePos=function(){for(var a=
{},c=0;c<f.length;c++)a[f[c].t]=V[c];return a}();t.strokeStyle="#ddd";t.beginPath();for(N=0;N<C.length;N++)a=V[f.length*C[N]>>0][0],R.push(a),t.dashedLine(a,0.5,a,D+u+O+y+2*A+0.5,[1,4]);t.stroke();a=n().x(function(a,c){return I(c)}).y(function(a){return U(a.n)}).canvasLineTemplate("linear").strokeStyle("#1FA3C9").ctx(e);a.y(function(a){return Q(a.ma5)}).strokeStyle(F["5"]);a(f);a.y(function(a){return Q(a.ma10)}).strokeStyle(F["10"]);a(f);a.y(function(a){return Q(a.ma30)}).strokeStyle(F["30"]);a(f);
a.y(function(a){return Q(a.ma60)}).strokeStyle(F["60"]);a(f)};$("#changeColor").click(function(){bbb.barColor(["s",["ab","#D45947"],["be","#66A588"],["eq","red"]]);bbb(f)});var ja="touchmove"in window?"touchmove":"mousemove",ka="touchend"in window?"touchend":"mouseout",la="touchstart"in window?"touchstart":"mousedown";this.draw=a;P&&$(l).data("tech",j);a();G=new g(t,{grid:{panel:l,x:0.5,y:0.5,width:K-52,height:D+u+20,color:"#ccc",pos:w,scale:[I,scaleY],showTextLine:!0,xTextPos:R}});H=new g(t,{grid:{panel:l,
x:0.5,y:D+u+y+O,width:K-52,height:A+E,pos:ha,scale:[I,W],tickDecimals:0}});z=new g(t,{grid:{panel:l,x:0.5,y:D+u+y+O+A,width:K-52,height:A,pos:ia,scale:[I,U],tickDecimals:2}});(function(){M=scaleY.ticks(5);for(N=0;N<M.length;N++)w.push(Q(M[N]));for(N=0;N<C.length;N++){var a=f[f.length*C[N]>>0].t;ga.push(a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8))}ca=W.ticks(3);for(N=0;N<ca.length;N++)ha.push(W(ca[N]));da=U.ticks(3);for(N=0;N<da.length;N++)ia.push(U(da[N]))})();(function(){G.drawAxis({direction:"y",
position:"right",formatter:function(a){return 1E4<=a?(+a).toFixed(0):1E3<a&&1E4>a?(+a).toFixed(1):a}});G.drawAxis({direction:"x",position:"bottom",xText:ga});H.drawAxis({direction:"y",position:"right",autoIndent:!0,formatter:function(a){a/=100;return a>=(temp=Math.pow(10,8))?(a/temp).toFixed(0)+"亿":a>=(temp=Math.pow(10,4))?(a/temp).toFixed(0)+"万":a}});P&&z.drawAxis({direction:"y",autoIndent:!0,position:"right",cls:"indexLabel"})})();t.beginPath();t.strokeStyle="#ccc";t.moveTo(K-52+0.5,0.5);t.lineTo(K-
52+0.5,J-B+1);t.moveTo(0.5,D+u+y+O+0.5);t.lineTo(K-52,D+u+y+O+0.5);t.stroke();t.beginPath();t.strokeStyle="#CBCBCB";t.strokeRect(0.5,0.5,K-1,J-1);t.stroke();(function(){var a=V[ea],c=V[fa],e=a[0],k=a[2],a=c[0],c=c[1],k=$('<div class="ktip-min-value" />').css({position:"absolute",left:e,top:k,"text-decoration":"overline"}).html(f[ea].i.toFixed(2)).appendTo("#canvasPanel");I(ea)>K/2&&(e=k.width(),k.css({"margin-left":-e}));e=$('<div class="ktip-max-value" />').css({position:"absolute",left:a,height:20,
top:c,"line-height":"20px","margin-top":-20,"text-decoration":"underline"}).html(f[fa].a.toFixed(2)).appendTo("#canvasPanel");I(fa)>K/2&&(a=e.width(),e.css({"margin-left":-a}))})();(function(){$("#canvasPanel").on(ja,function(a,e){a.preventDefault();a=a.originalEvent||a;a.touches&&a.touches.length?a=a.touches[0]:a.changedTouches&&a.changedTouches.length&&(a=a.changedTouches[0]);a.offsetX=a.pageX-$(a.target).offset().left;a.offsetY=a.pageY-$(a.target).offset().top;var k=$("#canvasPanel"),d=global.canvasWidth,
b=global.canvasHeight;if(!(0<$("#kTipma").length))$('<div id="kTip" /><div id="kTipma" /><div id="kvolTip" /><div id="kindexTip" /><div id="kTipTime" /><div id="kTipPrice" /><canvas id="canvasMask" />').css({position:"absolute",left:0,top:0}).appendTo(k),$("#canvasMask").get(0).width=global.canvasWidth,$("#canvasMask").get(0).height=global.canvasHeight,p("canvasMask");$("#kTip").css({left:5,top:1});$("#kTipma").css({left:5,top:D});$("#kvolTip").css({left:5,top:D+u+y+O});$("#kindexTip").css({left:5,
top:D+u+y+O+A});$("#canvasMask").css("z-index",9).attr({width:d,height:b});$("#kTipTime, #kTipPrice").css({position:"absolute",background:"#555",color:"#fff",height:"18px","line-height":"16px",width:70,"text-align":"center","float":"left","z-index":99});var k=(I.range()[1]-I.range()[0])/(I.domain()[1]-I.domain()[0]),j=(a.offsetX-(V[0][0]-I.barRangeBand()/2)/2)/k>>0;e&&(j=f.length-1);b=$("#canvasMask").get(0);m(b);k=b.getContext("2d");k.clearRect(0,0,global.canvasWidth,global.canvasHeight);$(b).hide();
$(b).show();if(0>=a.offsetX||a.offsetX>d-52||a.offsetY<D||a.offsetY>D+u+y+O+2*A)$("#kTipTime, #kTipPrice").hide();else{var b=D,g=d-52+0.5,i=D+u+y+O+E+A+0.5;k.beginPath();k.strokeStyle="#A0A0A0";j>=f.length&&(j=f.length-1);if(f[j]){e||(k.dashedLine(V[j][0],b,V[j][0],i,[2,3]),k.dashedLine(0.5,Q(f[j].c),g,Q(f[j].c),[2,3]));k.stroke();var l=function(a,e){return a.replace(/<%([^%>]+)?%>/g,function(f,k){var d=e[j][k],b=e[j].c,g;g=e[j-1]?e[j-1].c:q&&0<q.length?q[q.length-1].c:e[j].o;var i;if("t"==k)return d.substring(0,
8)+","+d.substring(8,12);"n"==k&&(e[0].code.split("_")[0].match(/^(usa|hk)/i)&&(d*=100),d=e[0].code.split("_")[0].match(/^(176|177|178|169|168|170|185|184|186|189)/)?c.formatUnit(d,2,!0):c.formatUnit(d/100,2,!0));if(0==k.indexOf("ma"))return d?(b=k.replace(/[^0-9]/ig,""),i=F[b],'<span style="color: '+i+'">MA'+b+":"+d.toFixed(2)+"</span>"):"";if(-1!==a.indexOf("指标"))return i=h[v][k],d=isNaN(d)?0:d,'<span style="color:'+i+'">'+k+":"+d.toFixed(2)+"</span>";var l=e[j-1]?e[j-1].c:e[j].o;d>=l?i="#ec5f4c":
d<l&&(i="#6ba583");"zhang"==k&&(d=(b-g).toFixed(2));"zhangfu"==k&&(d=(100*((b-g)/g)).toFixed(2)+"%");if("zhang"==k||"zhangfu"==k)i=0<=+d.replace(/[%]/ig,"")?"#ec5f4c":"#6ba583";return'<span style="color:'+i+'">'+d+"</span>"})};$("#kTip").html(l("<%t%> 开：<%o%> 高：<%a%> 低：<%i%> 收：<%c%> 涨跌：<%zhang%> 涨幅：<%zhangfu%>",f));$("#kTipma").html(l("<%ma5%> <%ma10%> <%ma30%> <%ma60%>",f));$("#kvolTip").html(l("成交量 量:<%n%>",f));k=V[j][0]-35;0>=k?k=0:k>=d-52-70&&(k=d-52-70);b=f[j].t;e?$("#kTipTime, #kTipPrice").hide():
($("#kTipTime").html(b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)).css({left:k,top:D+u+20+1}).show(),$("#kTipPrice").css({left:d-52,top:Q(f[j].c),width:"auto",background:f[j].c>=f[j].o?"#ec5f4c":"#6ba583","margin-top":"-9px",padding:"0 5px"}).html(1E4<f[j].c?f[j].c.toFixed(1):f[j].c.toFixed(2)).show());"function"==typeof klTouchmoveCallback&&!e&&klTouchmoveCallback(f,j)}if(Y&&Y[j]){var d="指标量 ",r;for(r in Y[j])d+="<%"+r+"%> ";$("#kindexTip").html(l(d,Z))}}}).on(ka,function(){$("#kTipTime, #kTipPrice").html("").hide();
var a=$("#canvasMask").get(0);a.getContext("2d").clearRect(0,0,global.canvasWidth,global.canvasHeight);$(a).hide();$(a).show();"function"==typeof klTouchendCallback&&klTouchendCallback()}).on(la,function(a){a=a.originalEvent||a;a.preventDefault()}).trigger("touchmove",[!0])})();k.drawEndFn&&k.drawEndFn()}});v("KPainter",["mathToolkit","KLineProvider","drawKLine","arrayToolkit"],function(b,i,d,g){function l(c,k){clearTimeout(c.tId);c.tId=setTimeout(function(){c.call(k)},100)}var n=function(c,k){var f=
c.className.split(/\s+/),d=0;for(d in f)if(f[d]==k)return!0;return!1},o=function(c,k){var f,d;$.each(c,function(c,b){f=k[c];d=document.getElementById(f);if(!b&&!n(d,k.disabledClass)){var h=d.className;d.className=h+(""!=h?" ":"")+k.disabledClass;d.disabled=!0}else if(b&&n(d,k.disabledClass)){var h=k.disabledClass,a=" "+d.className+" ",a=a.replace(/(\s+)/gi," "),h=a.replace(" "+h+" "," "),h=h.replace(/(^\s+)|(\s+$)/g,"");d.className=h;d.disabled=!1}})},b=function(c){var k=c.klineConfig;delete c.klineConfig;
this.configs=$.extend({},{drawDataLength:60,indicatorNeedMoreLength:60,movePerDistance:0.34,zoom:0.25,minNumInScreen:20,eventBtn:{goNext:"nextEvent",goPre:"preEvent",zoomIn:"zoomInEvent",zoomOut:"zoomOutEvent",disabledClass:"disabled"},animateEnable:!0,getStockInfo:function(){},startDraw:function(){}},c);this.draw={startDateInHistory:0,startDate:"",goPreNeedNum:0,goNextNeedNum:0,drawData:[],preHandle:"",preHandleInHistory:0};this.historyData={data:[],startDate:"",endDate:"",lastDate:"",num:0};this.eventStatus=
{goPre:!0,goNext:!0,zoomIn:!0,zoomOut:!0};this.zoomSpeed=0;this.maxZoomIn=300;var f=this,b=1;this.kLineDataObj=new i(k);this.kLineDataObj.on("getFirstGetData",function(c){if(f.kLineDataObj.configs.historyDataAndNum)document.getElementById(f.configs.eventBtn.zoomIn).style.display="none",document.getElementById(f.configs.eventBtn.zoomOut).style.display="none";f.initDrawConfigs(c,f.kLineDataObj.historyStart,f.kLineDataObj.total,f.kLineDataObj.currentDate)});this.kLineDataObj.getStockInfo(f.configs.getStockInfo);
this.kLineDataObj.on("getDataByKeeping",function(c){f.configs.startDraw();var k=f.getPosByDrawDataLength(c),h;if(c.length>=f.configs.drawDataLength&&!f.kLineDataObj.configs.betweenTwoDays)h=c.slice(-f.configs.drawDataLength);else if(0<f.kLineDataObj.configs.betweenTwoDays.length)for(var a=f.kLineDataObj.configs.betweenTwoDays[0],e=0;e<c.length;e++)c[e].t===a&&(h=c.slice(e));else h=c.slice(0);c=f.getIndicatorArr(c,k);b?(d(null,h,null,c),b=0):(h=h[h.length-1],f.draw.drawData[f.draw.drawData.length-
1].t===f.historyData.seemLastDate&&(f.draw.drawData.pop(),f.draw.drawData.push(h),d(null,f.draw.drawData.slice(0),null,c)))});this.kLineDataObj.getData()};b.prototype.getPosByDrawDataLength=function(c){return c.length-this.configs.drawDataLength};b.prototype.getMaxMa=function(){var c=this.kLineDataObj.configs.ma;return+c[c.length-1]};b.prototype.checkConfigsIsLegal=function(c){var d=this.configs.drawDataLength;if(d){if("number"!==typeof d)throw"drawDataLength  need numeber type !";if(d>this.kLineDataObj.numInLastJsFile&&
d<c.length)throw"drawDataLength couldn't be bigger than the 'num' in last.js!";}};b.prototype.initDrawConfigs=function(c,d,f,b){this.checkConfigsIsLegal(c);var h=this.getPosByDrawDataLength(c),g=[];c.length<=this.configs.drawDataLength?(g=c,h=0):g=c.slice(h);var j=Math.ceil(g.length*(1-this.configs.movePerDistance))-1;this.refreshHistoryData({data:c,startDate:c[0].t,endDate:c[c.length-1].t,lastDate:c[c.length-1].t,seemLastDate:b,historyStart:d,historyTotal:+f,num:c.length});this.refreshAfterDraw({startDate:g[0].t,
startDateInHistory:h,drawData:g,goPreNeedNum:g.length+this.getMaxMa()-1,goNextNeedNum:g.length,preHandle:g[j].t,preHandleInHistory:j+h,preHandleInTrueDrawData:j});this.initZoomSpeed();this.initMoveSpeed();this.refreshEventStatus(f)};b.prototype.refreshEventStatus=function(){var c={},d=this,f=this.draw.drawData.length,b=this.draw.drawData[f-1],h=this.maxZoomIn,g=this.configs.minNumInScreen,g=Math.floor(this.configs.zoom*g)+g;c.goPre=this.draw.startDate===this.historyData.historyStart?!1:!0;c.goNext=
b.t===this.historyData.seemLastDate?!1:!0;c.zoomOut=f>=h||this.draw.startDate===this.historyData.historyStart?!1:!0;c.zoomIn=f<g?!1:!0;$.each(c,function(c,a){d.eventStatus[c]=a});o(this.eventStatus,this.configs.eventBtn)};b.prototype.initZoomSpeed=function(){this.zoomSpeed=this.draw.drawData.length*this.configs.zoom};b.prototype.initMoveSpeed=function(){this.moveSpeed=this.getMoveDataNum(this.draw.drawData.slice(0))};b.prototype.refreshConfigs=function(c){for(var c=c.slice(0),d=c[0].t,f,b,h=this.historyData.data,
g=Math.ceil(c.length*(1-this.configs.movePerDistance))-1,j=c[g].t,a=0;a<h.length;a++)if(h[a].t==d)f=a;else if(h[a].t===j){b=a;break}this.refreshAfterDraw({startDate:d,startDateInHistory:f,drawData:c,goPreNeedNum:c.length+this.getMaxMa()-1,goNextNeedNum:c.length,preHandle:j,preHandleInHistory:b,preHandleInTrueDrawData:g});return f};b.prototype.tryGetFromHistory=function(){var c=this.draw.drawData.length,d=this.draw.preHandleInHistory-this.draw.goNextNeedNum+1,f=this.getMaxMa();if(d>=f-1)return this.historyData.data.slice(d,
d+c);return this.historyData.num>=this.historyData.historyTotal?(0>d&&(d=0),this.historyData.data.slice(d,d+c)):!1};b.prototype.getIndicatorArrFromHistory=function(){return this.getIndicatorArr(this.historyData.data,this.draw.preHandleInHistory-this.draw.goNextNeedNum+1)};b.prototype.getIndicatorArr=function(c,d){return 0>d?[]:c.slice(0<d-this.configs.indicatorNeedMoreLength?d-this.configs.indicatorNeedMoreLength:0,d)};b.prototype.getFromHistory=function(c,b,f,h){var g=this,f=f||"getAfterDate",i=
this.draw.startDateInHistory,c=this.historyData.data,j=this.getMaxMa(),a=[],e=[],l=[],m=c[c.length-1].t,e=this.historyData.num-this.draw.startDateInHistory<b&&this.historyData.endDate!==this.historyData.seemLastDate?!0:!1,n=i-b;if("getAfterDate"==f&&!e){for(f=i;f<=i+b&&!(c[f].t&&a.push(c[f]),c[f].t===this.historyData.seemLastDate);f++);return a}if("getAfterDate"==f&&e)e=i+2>j?c.slice(i-j+2,i+1):c.slice(0,i+1),this.kLineDataObj.getDataByYearsAndNum([b,e[0].t,"getAfterData"],function(c){for(var e=0;e<
c.length;e++)c[e].t>m&&l.push(c[e]);g.refreshHistoryData({data:l},"pushBackward");for(e=i;e<=i+b&&!(g.historyData.data[e].t&&a.push(g.historyData.data[e]),g.historyData.data[e].t===g.historyData.seemLastDate);e++);c=g.draw.drawData.length;a.slice(g.draw.goNextNeedNum);c=a.slice(-c);e=g.refreshConfigs(c,0);e=g.getIndicatorArr(g.historyData.data,e);d(null,c,null,e);g.saveEventStauts(h);g.refreshEventStatus()});else{if(this.historyData.num>=this.historyData.historyTotal)0>n&&(n=0);else if(n<=j-1)return!1;
for(;n<i;n++)c[n].t&&a.push(c[n]);return a}};b.prototype.refreshHistoryData=function(c,d){if("pushForward"===d){var f=this.historyData.lastDate,b=this.historyData.historyTotal,h=this.historyData.historyStart,i=this.historyData.seemLastDate,j=this.historyData.data.slice(this.draw.preHandleInHistory+1),j=g.mergeLargeArr(c.data.slice(0),j);this.historyData={data:j,startDate:j[0].t,endDate:j[j.length-1].t,lastDate:f,historyStart:h,historyTotal:b,seemLastDate:i,num:j.length}}else"pushBackward"===d?(f=
this.historyData.seemLastDate,b=this.historyData.historyTotal,h=this.historyData.historyStart,i=this.historyData.seemLastDate,j=g.mergeLargeArr(this.historyData.data.slice(0),c.data),this.historyData={data:j,startDate:j[0].t,endDate:j[j.length-1].t,lastDate:f,historyStart:h,historyTotal:b,seemLastDate:i,num:j.length}):$.extend(this.historyData,c)};b.prototype.refreshAfterDraw=function(c){$.extend(this.draw,c)};b.prototype.getNextData22=function(){if(!this.eventStatus.goNext)return!1;var c=this.saveEventStauts(),
b=this.draw.drawData.slice(0),f=this.draw.drawData.length,g=this.getMoveDataNum(this.draw.drawData.slice(0)),i=this.getFromHistory(this.draw.startDate,this.draw.goNextNeedNum+g,null,c);if(i){var l=i.slice(this.draw.goNextNeedNum),f=i.slice(-f),i=this.getIndicatorArr(this.historyData.data,this.refreshConfigs(f,0));this.configs.animateEnable?h(b,g,this.moveSpeed,l):d(null,f,null,i);this.saveEventStauts(c);this.refreshEventStatus()}};b.prototype.getNextData=function(){l(this.getNextData22,this)};b.prototype.getMoveDataNum=
function(c){return c.length-this.draw.preHandleInTrueDrawData};b.prototype.saveEventStauts=function(c){var c=c||{goPre:!1,zoomOut:!1,goNext:!1,zoomIn:!1},d={};$.each(this.eventStatus,function(c,b){d[c]=b});this.eventStatus=c;o(c,this.configs.eventBtn);return d};b.prototype.getPreData=function(){l(this.getPreData22,this)};b.prototype.getPreData22=function(){if(!this.eventStatus.goPre)return!1;var c=this.saveEventStauts(),b=this.draw.drawData.slice(0),f=this.getMoveDataNum(b),h=this;this.getMaxMa();
var i=this.draw.startDate,l=[],j=this.tryGetFromHistory(),a,e,n=!1;if(j){l=this.getIndicatorArrFromHistory();for(n=j.length-1;0<=n;n--)if(j[n].t==i){a=n;break}n=j.slice(0,a);this.saveEventStauts(c);this.refreshConfigs(j,0);this.refreshEventStatus()}h.configs.animateEnable?(m(b.slice(0),f,this.moveSpeed,n),e=20*(2*this.moveSpeed-1)):j&&(d(null,j,null,l),e=20);if(!j){var o;setTimeout(function(){h.kLineDataObj.getDataByYearsAndNum([h.draw.goPreNeedNum,h.draw.preHandle],function(a){for(var e=a.length-
1;0<=e;e--)a[e].t==i&&(o=e);l=h.getIndicatorArr(a,o-(f-1));var e=a.slice(o-(f-1),o),j=b.slice(0,b.length-f+1),e=g.mergeLargeArr(e,j);d(null,e,null,l);h.saveEventStauts(c);h.refreshHistoryData({data:a},"pushForward");h.refreshConfigs(e,0);h.refreshEventStatus()})},e)}};b.prototype.getZoomIn=function(){l(this.getZoomIn22,this)};b.prototype.getZoomIn22=function(){if(!this.eventStatus.zoomIn)return!1;var c=this.saveEventStauts(),b=this.draw.drawData.slice(0),f=Math.round(b.length*this.configs.zoom),b=
b.slice(-(b.length-f)),f=this.getIndicatorArr(this.historyData.data,this.refreshConfigs(b,0));this.configs.animateEnable?(f=this.draw.drawData.slice(0),p(f,f.length,b.length,!1,this.zoomSpeed)):d(null,b,null,f);this.saveEventStauts(c);this.refreshEventStatus()};b.prototype.getZoomOut=function(){l(this.getZoomOut22,this)};b.prototype.getZoomOut22=function(){if(!this.eventStatus.zoomOut)return!1;var c=this.saveEventStauts(),b=this.configs.zoom,f=this.draw.drawData.slice(0),h=this.draw.drawData.slice(0),
i=this,b=Math.round(h.length*b),l,j,a,e=this.getFromHistory(this.draw.startDate,b,"getBeforeDate");if(e)l=g.mergeLargeArr(e,h),j=this.refreshConfigs(l,0),a=this.getIndicatorArr(this.historyData.data,j),this.configs.animateEnable?p(l,f.length,l.length,!0,this.zoomSpeed):d(null,l,null,a),this.saveEventStauts(c),this.refreshEventStatus();else{var m=this.draw.drawData.length,n=b+m,h=n+this.getMaxMa(),o=this.draw.drawData[m-1];this.kLineDataObj.getDataByYearsAndNum([h,this.draw.drawData[m-2].t],function(e){e.push(o);
l=e.slice(-n);i.refreshHistoryData({data:e.slice(0,e.length-(m-i.draw.preHandleInTrueDrawData)+1)},"pushForward");j=i.refreshConfigs(l,0);a=i.getIndicatorArr(i.historyData.data,j);i.configs.animateEnable?p(l,f.length,l.length,!0,i.zoomSpeed):d(null,l,null,a);i.saveEventStauts(c);i.refreshEventStatus()})}};b.prototype.getAlreadyDrawArray=function(){return this.draw.drawData};var p=function(c,b,f,h,g){function i(){if(h){if(b>=f)return;b<g*a+j?b+=a:b>=g*a+j&&b++}else{if(b<=f)return;b>b-g*a?b-=a:b<=b-
g*a&&b--}var e=c.slice(-b);d(null,e,null);requestAnimationFrame(i)}var j=b,a=Math.floor(Math.abs(f-b)/g);i()},m=function(c,b,f,h){var i=0,l=[],b=h?h.length+1:b,j=function(){var m=[];if(a>=b-1)return!1;a<e*f?(a+=e,i=e):a>=e*f&&(a++,i=1);c.splice(-i,i);if(h)m=h.splice(-i,i);else for(var n=0;n<i;n++)m[n]={t:0};l=g.mergeLargeArr(m,c);d(null,l,null);requestAnimationFrame(j)},a=0,e=Math.floor(b/f);j()},h=function(c,b,f,h){var i=0,l=h.length,j=h.slice(0),a=Math.floor(l/f),l=a?l:l+1,e=a,m=[],n=function(){if(i>=
l)return!1;c.splice(0,e);m=g.mergeLargeArr(c,j.splice(0,e));d(null,m,null);i<a*f?(i+=a,e=a):i>=a*f&&(i++,e=1);requestAnimationFrame(n)};n()};return b});v("TimeShareProvider",["arrayToolkit","EventTarget","hexinStock/util","Xhr","UrlConfig"],function(b,i,d,g,l){var n=function(b,c,d){if("max"===d){if(null!=b&&b>c)return b}else if("min"===d&&null!=b&&b<c)return b;return c},o=function(b,c){var d=[];b.split(c)[1].replace(/([^\/.,]+)/g,function(c){d.push(c)});d.pop();return"quotebridge_"+d.join("_")},p=
function(b,c){return 1===arguments.length?{t:b[0],nowp:parseFloat(b[1]),np:parseFloat(b[2]),av:parseFloat(b[3]),n:parseFloat(b[4])}:{t:b[0],nowp:c.nowp,np:c.np,av:c.av,n:c.n}},m=function(b){i.call(this);this.configs=$.extend({},{url:l.urlHost,urlVersion:"v2/time/",fiveDaysEnable:!1,moneyFlowEnable:!1,stockType:"1000",code:["33_300033"],isKeepingGet:!1,intervalTime:6E4,drawWidth:0},b);this.keepingMoneyFlowHandle=this.dataLastTimeQuery=this.dataLastTime="";this.dataArray=[];this.interval=""};d.inheritPrototype(m,
i);m.prototype.getFromWeb=function(b,c){var d=this.configs.url+this.configs.urlVersion+this.configs.code.join(","),d=c?d+"/"+c+".js":d+"/last.js",f=o(d,this.configs.url);g.jqXhrWithoutCallback(d,b,f)};m.prototype.getFiveDaysFromWeb=function(b){var c=this.configs.url+this.configs.urlVersion+this.configs.code[0]+"/lastFive.js",d=o(c,this.configs.url);g.jqXhrWithoutCallback(c,b,d)};m.prototype.setDataLastTime=function(b){return b[b.length-1].t};m.prototype.setSuspensionDisplay=function(b){for(var c=
[],d=0;d<b.length;d++)b[d].isSuspension&&c.push(b[d].code);this.trigger("getSuspensions",c)};m.prototype.getDataLastTimeQuery=function(b){for(var c=[],d=this.configs.code,f=0;f<d.length;f++)b[f].code==d[f]&&c.push(b[f].dataLastTime);return c.join(",")};m.prototype.arrageEachStock=function(b,c){var d=this.arrageDataByFirstGet(b);d.dataLastTime=this.setDataLastTime(d.dataArray);d.code=c;return d};m.prototype.arrageEachDates=function(b,c){return this.getDataArrayFromFiveDays(b.split(";"),c)};m.prototype.getData=
function(){var b=this;""===this.dataLastTime&&this.getFromWeb(function(c){b.dataArray=$.map(c,function(c,d){return b.arrageEachStock(c,d)});b.trigger("getTodayData",b.dataArray);b.trigger("firstGetTodayData",b.dataArray);b.needStopOnClosingTime(b.dataArray);b.dataLastTimeQuery=b.getDataLastTimeQuery(b.dataArray);b.setSuspensionDisplay(b.dataArray);b.configs.isKeepingGet&&b.keepingGetData(b.dataArray)})};m.prototype.arrageMoneyFlow=function(b){var c=[],c={},d={},f=b.data.split(";");d.isOpen=b.open;
d.dataLastTime=f[f.length-1].split(",")[0];c=b.rt.split(",");b=c[0].split("-");c=c[1].split("-");d.AMOpenTime=b[0];d.AMCloseTime=b[1];d.PMOpenTime=c[0];d.PMCloseTime=c[1];d.dataArray=[];for(b=0;b<f.length;b++)c=f[b].split(","),c={t:c[0],mfsb:parseFloat(c[1]?c[1]:0),mfss:parseFloat(c[2]?c[2]:0),mfbb:parseFloat(c[3]?c[3]:0),mfbs:parseFloat(c[4]?c[4]:0),mflb:parseFloat(c[5]?c[5]:0),mfls:parseFloat(c[6]?c[6]:0),mfmb:parseFloat(c[7]?c[7]:0),mfms:parseFloat(c[8]?c[8]:0)},d.dataArray.push(c);return d};m.prototype.getMoneyFlow=
function(b){this.configs.moneyFlowEnable=!0;var c=this,d=this.configs.code[0],f=[],i=l.urlHost+"v2/moneyflow/"+d+"/last.js",m="quotebridge_v2_moneyflow_"+d+"_last";g.jqXhrWithoutCallback(i,function(b){f[0]=c.arrageMoneyFlow(b[d]);c.needStopOnClosingTime(f,"moneyFlow")},m);this.on("firstGetTodayData",function(){0!=f.length?b(f[0]):g.jqXhrWithoutCallback(i,function(g){f[0]=c.arrageMoneyFlow(g[d]);c.needStopOnClosingTime(f,"moneyFlow");b(f[0])},m)});c.keepingMoneyFlowHandle=setTimeout(function(){g.jqXhrWithoutCallback.call(c,
i,function(g){f[0]=c.arrageMoneyFlow(g[d]);c.needStopOnClosingTime(f,"moneyFlow");b(f[0])},m);c.keepingMoneyFlowHandle=setTimeout(arguments.callee,c.configs.intervalTime)},c.configs.intervalTime)};m.prototype.getFiveDaysTotal=function(b){var c=this,d=[],f=[],g=0,i=1E7;this.configs.fiveDaysEnable&&this.getFiveDaysFromWeb(function(l){var j=[];$.map(l.data,function(a,c){var b={};b.key=c;b.d=a;j.push(b)});j.sort(function(a,c){return a.key<c.key?-1:1});for(var a,e=[],m=0;m<j.length;m++)d.push(j[m].key),
a=c.arrageEachDates(j[m].d,j[m].key),e.push(a),i=n(a.minPrice,i,"min"),g=n(a.maxPrice,g,"max");var o=c.getPreClosePrice(l.pre,l.data[d[0]]);if(l.isLastdayIncluded)f={data:e,preClosePrice:o,date:d,max:g,min:i},b(f);else{a=c.dataArray;if(0===a.length)c.on("firstGetTodayData",function(a){var a=a[0],j=c.currentDataConvertoIn5days(a.dataArray);e.push(j);a=a.todayDate;d.length!==e.length&&d.push(a);i=n(j.minPrice,i,"min");g=n(j.maxPrice,g,"max");f={data:e,preClosePrice:o,date:d,max:g,min:i};b(f)});else a=
a[0],l=c.currentDataConvertoIn5days(a.dataArray),e.push(l),a=a.todayDate,d.length!==e.length&&d.push(a),i=n(l.minPrice,i,"min"),g=n(l.maxPrice,g,"max"),f={data:e,preClosePrice:o,date:d,max:g,min:i},b(f);c.on("getTodayDataByKeeping",function(a){a=c.currentDataConvertoIn5days(a[0].dataArray);e.pop();e.push(a);i=n(a.minPrice,i,"min");g=n(a.maxPrice,g,"max");f={data:e,preClosePrice:o,date:d,max:g,min:i};b(f)})}})};m.prototype.currentDataConvertoIn5days=function(b){for(var c=b.length,d=this.interval,f=
[],g=0,i=1E8,l=b[c-1],c=c-1,j=0;j<c;j++)d&&1!==d&&0===j%d&&f.push(b[j]),b[j].nowp&&(g=n(b[j].nowp,g,"max"),i=n(b[j].nowp,i,"min"));d&&f.push(l);return{compressed:f,maxPrice:g,minPrice:i,total:b}};m.prototype.needStopOnClosingTime=function(d,c){if("fs"===(c||"fs"))for(var g=0;g<d.length;g++){if(0===d[g].isOpen||d[g].dataLastTime==d[g].AMCloseTime||d[g].dataLastTime==d[g].PMCloseTime)this.configs.code=b.remove(this.configs.code,d[g].code)}else(0===d[0].isOpen||d[0].dataLastTime==d[0].AMCloseTime||d[0].dataLastTime==
d[0].PMCloseTime)&&this.stopGetData();0==this.configs.code.length&&this.stopOnlyFs()};m.prototype.keepingGetEachStock=function(b,c){var d=this.arrageDataByKeepGet(b);d.code=c;for(var f=0;f<this.dataArray.length;f++)if(this.dataArray[f].code==c){this.dataArray[f].dataArray.pop.apply(this.dataArray[f].dataArray);this.dataArray[f].dataArray.push.apply(this.dataArray[f].dataArray,d.dataArray);this.dataArray[f].dataLastTime=this.setDataLastTime(this.dataArray[f].dataArray);this.dataArray[f].isSuspension=
b.stop;break}};m.prototype.keepingGetData=function(){var b=this;this.keepingGetHandle=setTimeout(function(){b.getFromWeb(function(c){$.map(c,function(c,d){b.keepingGetEachStock(c,d)});b.needStopOnClosingTime(b.dataArray);b.dataLastTimeQuery=b.getDataLastTimeQuery(b.dataArray);b.setSuspensionDisplay(b.dataArray);b.trigger("getTodayData",b.dataArray);b.trigger("getTodayDataByKeeping",b.dataArray)},b.dataLastTimeQuery);b.keepingGetHandle=setTimeout(arguments.callee,b.configs.intervalTime)},b.configs.intervalTime)};
m.prototype.stopOnlyFs=function(){this.configs.isKeepingGet=!1;clearTimeout(this.keepingGetHandle)};m.prototype.stopGetData=function(){this.configs.isKeepingGet=!1;clearTimeout(this.keepingGetHandle);this.configs.moneyFlowEnable&&clearTimeout(this.keepingMoneyFlowHandle)};m.prototype.setKeepingGetStatus=function(b){this.isKeepingGet=b?!0:!1};m.prototype.arrageDataByFirstGet=function(b){var c={},d=b.rt.split(","),f=d[0].split("-"),d=d[1].split("-");c.isOpen=b.open;c.isSuspension=b.stop;c.AMOpenTime=
f[0];c.AMCloseTime=f[1];c.PMOpenTime=d[0];c.PMCloseTime=d[1];c.preClosePrice=this.getPreClosePrice(b.pre,b.data);c.todayDate=b.date;c.stockName=b.name;c.dataArray=this._getDataArray(b.data.split(";"));return c};m.prototype.getPreClosePrice=function(b,c){return b?b:c.split(";")[0].split(",")[1]};m.prototype.arrageDataByKeepGet=function(b){var c={};c.dataArray=this._getDataArray(b.data.split(";"));return c};m.prototype._getDataArray=function(b){for(var c=[],d=b.length,f=0;f<d;f++){var g=b[f].split(",");
g[1]&&(c[f]=p(g))}return c};m.prototype.getDataArrayFromFiveDays=function(b){var c=[],d=b.length,f=Math.floor(this.configs.drawWidth/5),g=[],i=0,l=1E7;if(f&&d>2*f)this.interval=Math.floor(d/f);for(f=0;f<d;f++){var j=b[f].split(",");j[1]?c[f]=p(j):(c[f]=c[f-1],c[f]=p(j,c[f-1]));c[f].nowp&&(i=n(c[f].nowp,i,"max"),l=n(c[f].nowp,l,"min"));1!==this.interval&&0===f%this.interval&&g.push(c[f])}0!==g.length&&(g.pop(),g.push(c[d-1]));return{compressed:g,total:c,maxPrice:i,minPrice:l}};return m});v("Axis",
["require"],function(b){var i=function(b,g){this.data=b;this.options=g||{tickDecimals:2}};i.prototype.measureText=function(b){var g=b||this.tickGeneration("price"),i=document.createElement("div"),g="object"==typeof b?g.join("<br />"):b;i.innerHTML=g;i.style.position="absolute";i.style.top="-999px";document.body.appendChild(i);g=i.clientWidth;b=i.clientHeight/("object"==typeof b?b.length:1);document.body.removeChild(i);return{width:g,height:b}};i.prototype.tickGeneration=function(b){var g=null;this.options.ticks?
g=this.options.ticks:(g=0<this.options.ticksLength?this.options.ticksLength:6,b=this.getValue(b),g=scale.domain([b.min,b.max]).ticks(g,null,this.options.tickDecimals));return g};i.prototype.getTicks=function(b){return this.tickGeneration(b)};i.prototype.setTicks=function(){};i.prototype.getValue=function(d){var g=b(this.data,function(b){return"object"===typeof b?b[d]:b});return{max:g[1],min:g[0]}};i.prototype.draw=function(b,g){for(var i=b.ticks(g),n=0,o=[];n<i.length;n++)o.push(b(i[n]));return o}||
function(b){var g=b.context;if(b.leftAxisPos){g.textAlign="right";g.textBaseline="middle";for(var i=0;i<b.leftAxisPos.length;i++)g.fillText(this.tickGeneration("price")[i],b.leftAxisPos[i][0],b.leftAxisPos[i][1])}if(b.bottomAxisPos){g.textAlign="center";g.textBaseline="top";for(i=0;i<b.bottomAxisPos.length;i++)g.fillText(this.tickGeneration("price")[i],b.bottomAxisPos[i][0],b.bottomAxisPos[i][1])}};return i});v("extent",[],function(){return function(b,i){var d=-1,g=b.length,l,n,o;if(1===arguments.length){for(;++d<
g&&!(null!=(l=o=b[d])&&l<=l);)l=o=void 0;for(;++d<g;)if(null!=(n=b[d]))l>n&&(l=n),o<n&&(o=n)}else{for(;++d<g&&!(null!=(l=o=i.call(b,b[d],d))&&l<=l);)l=void 0;for(;++d<g;)if(null!=(n=i.call(b,b[d],d)))l>n&&(l=n),o<n&&(o=n)}return[l,o]}});v("genTime",[],function(){return function(b,i,d,g){var l=b.substring(0,2),n=b.substring(2,4),o=i.substring(0,2),p=i.substring(2,4),m=d.substring(0,2),h=d.substring(2,4),c=g.substring(0,2),k=g.substring(2,4),l=60*c+ +k-(60*m+ +h)+(60*o+ +p)-(60*l+ +n)+2,n=["09:30",
"10:30","11:30/13:00","14:00","15:00"];"0930"==b&&"1200"==i&&"1200"==d&&"1600"==g?n=["09:30","11:00","13:00","14:00","16:00"]:"0930"==b&&"1200"==i&&"1300"==d&&"1600"==g?n=["09:30","10:30","12:00/13:00","14:00","16:00"]:"0000"==b&&"1200"==i&&"1200"==d&&"2359"==g&&(n=["06:00","11:30","17:00","22:30","04:00"],l=1322);return{length:l,xText:n}}});T.config({shim:{jquery:{exports:"$"}},paths:{genTime:"hexinStock/genTime",arrayToolkit:"common/array/arrayToolkit",canvasLine:"hexinStock/canvas/line",scale:"hexinStock/scale",
Axis:"hexinStock/axis",extent:"hexinStock/extent",Grid:"hexinStock/grid",genTime:"hexinStock/genTime",detectPR:"hexinStock/detectPR"}});v("drawChart","canvasLine,scale,Axis,extent,Grid,fixSupportCanvas,genTime,detectPR,hexinStock/util".split(","),function(b,i,d,g,l,n,o,p){return function(d,h){function c(a){return 1E8<Math.abs(a)?(a/1E8).toFixed(2)+"亿":1E4<Math.abs(a)?(a/1E4).toFixed(2)+"万":a}window.global=window.global||{};global.canvasWidth=global.canvasWidth||document.getElementById("tcanvas").width;
global.canvasHeight=global.canvasHeight||document.getElementById("tcanvas").height;var k=h[0].preClosePrice,f=d[0],s=global.canvasWidth,q=global.canvasHeight;p("tcanvas");var r;$(f).css({position:"absolute",left:0,top:0});$("#canvasPanel").unbind();$(f).siblings(":not(.unRemovePanel, #fTip, .opacity-stock-name)").remove();var j=d.data("fsconfig")||{};j.drawStartFn&&j.drawStartFn();var a=f.getContext("2d");a.clearRect(0,0,s,q);var e=document.createElement("canvas");e.id="gridBase";e.width=s;e.height=
q;e.style.position="absolute";e.style.left=0;e.style.top=0;$("#canvasPanel").prepend($(e));p("gridBase");if(!e.getContext)if(window.G_vmlCanvasManager)e=window.G_vmlCanvasManager.initElement(e);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");var v=j.showzjlx?"0.24":"0.34",J=(r=o(h[0].AMOpenTime,h[0].AMCloseTime,h[0].PMOpenTime,h[0].PMCloseTime)).length,
B=s-60-54,t=q-20-30,x=h[0].dataArray,S={},P=v*t,D=j.showzjlx?t-2*P:t-P,y,v=g(x,function(a){return a.nowp}),O=g(x,function(a){return a.n});if((h[0].isSuspension||0==O[1])&&v[0]==v[1])v[0]*=1.01,v[1]/=1.01,O[1]=1;var L=i().domain([0,J]).range([62.5,s-54+0.5]),A=i().domain(v,k).range([20+D+0.5,20]),E=i().range([20+D+P,20+D+40]).domain([O[0],O[1]]),u=1E4<O[1]?"万手":"手",C=A.ticks(7);this.draw=function(){var c=b().x(function(a,b){return L(b)}).y(function(a){return A(a.nowp)}).canvasLineTemplate("linear").strokeStyle("#1FA3C9").ctx(a),
d=b().x(function(a,b){return L(b)}).y(function(a){return A(a.nowp)}).canvasLineTemplate("linear-closed").y0(D+20+20-0.5).strokeStyle("#fff").ctx(a),e=b().x(function(a,b){return L(b)}).y(function(a){return A(a.av)}).canvasLineTemplate("linear").strokeStyle("#EE7F09").ctx(a),f=b().x(function(a,b){return L(b)}).y(function(a){return E(a.n)}).canvasLineTemplate("linear-bar").strokeStyle("#1FA3C9").bottom(E.range()[0]).ctx(a);d(x);c(x);e(x);f(x);y=c.linePos()};this.setData=function(a){x=a};this.drawzjlx=
function(c){for(var d=c.dataArray,c=[],j=[],h=[],k=[],m=[],n=e.getContext("2d"),o=0;o<d.length;o++)"t"!=o&&(c.push(d[o].mfsb-d[o].mfss),j.push(d[o].mfbb-d[o].mfbs),h.push(d[o].mflb-d[o].mfls),k.push(d[o].mfmb-d[o].mfms));m.push(g(c,function(a){return Math.abs(a)})[1]);m.push(g(j,function(a){return Math.abs(a)})[1]);m.push(g(h,function(a){return Math.abs(a)})[1]);m.push(g(k,function(a){return Math.abs(a)})[1]);S.mfs=c;S.mfb=j;S.mfm=k;S.mfl=h;for(var o=Math.max.apply(null,m),r=i().range([20+D+2*P,20+
D+P+20]).domain([-o,o],"0"),d=r.ticks(5,2),o=0,h=[];o<d.length;o++)h.push(r(d[o]));(new l(n,{grid:{panel:f,x:gridInfo.leftAxisPos[0][0],y:gridInfo.leftAxisPos[0][1]+P,width:B,height:P,color:"#555",xsize:4,pos:h,scale:[L,r],tickDecimals:0}})).drawAxis({direction:"y",position:"right",formatter:function(a){return 1E8<Math.abs(a)?(a/1E8).toFixed(0)+"亿":1E4<Math.abs(a)?(a/1E4).toFixed(0)+"万":a}});n=b().x(function(a,b){return L(b)}).y(function(a){return r(a)}).canvasLineTemplate("linear").strokeStyle("#C00C00").ctx(a);
a.clearRect(gridInfo.leftAxisPos[0][0],gridInfo.leftAxisPos[0][1]+P,B,P);n.strokeStyle("#C00C00");n(c);n.strokeStyle("#FB8E04");n(j);n.strokeStyle("#719F1F");n(k)};(function(){var a=e.getContext("2d");a.strokeStyle="#CBCBCB";a.strokeRect(0.5,0.5,s-1,q-1);for(var b=0,c=[];b<C.length;b++)c.push(A(C[b]));b=new l(a,{grid:{panel:f,x:60,y:0,width:B,height:t+20,color:"#555",ysize:7,xsize:4,pos:c,topBorder:!0,scale:[L,A],showTextLine:!0}});gridInfo=b.draw();b.drawAxis({direction:"y",position:"right",formatter:function(a){var a=
+a,b="#929292";a>k?b="#D45947":a<k&&(b="#66A588");return'<span style="color:'+b+'">'+Math.abs(100*((a-k)/k)).toFixed(2)+"%</span>"}});b.drawAxis({direction:"y",position:"left"});b.drawAxis({direction:"x",position:"bottom",autoIndent:!0,xText:r.xText});for(var c=E.ticks(4,2),b=0,d=[];b<c.length;b++)d.push(E(c[b]));(new l(a,{grid:{panel:f,x:gridInfo.leftAxisPos[0][0],y:gridInfo.leftAxisPos[0][1]+20,width:B,height:P-20,color:"#555",xsize:4,pos:d,scale:[L,E],tickDecimals:0}})).drawAxis({direction:"y",
position:"right",formatter:function(a){return 1E4<+a?(a/1E4).toFixed(0)+"万":a}})})();$("#canvasPanel").mousemove(function(a){var b=$("#canvasPanel"),d=b.width(),e=b.height();0<!$("#canvasMask").length&&($('<canvas id="canvasMask" />').css({position:"absolute",top:0,left:0,"z-index":9}).attr({width:d,height:e}).appendTo(b),p("canvasMask"));var f=(L.range()[1]-L.range()[0])/(L.domain()[1]-L.domain()[0]),g=(a.offsetX-60)/f>>0,f=$("#canvasMask").get(0);n(f);0<$("#fTipTime").length||$('<div id="fTipTime" /><div id="fTipnowp" />').css({position:"absolute",
background:"#555",color:"#fff",height:"18px","line-height":"16px",width:40,"text-align":"center","float":"left"}).appendTo(b);f=f.getContext("2d");f.clearRect(0,0,d,e);$("#fTipTime, #fTipnowp").html("").hide();if(!(60>=a.offsetX||a.offsetX>d-54||20>a.offsetY||a.offsetY>e-30))if(0<$("#fTip").length||$('<div id="fTip" />').css({position:"absolute",left:65,top:2}).appendTo(b),!(0<$("#zjlxTip").length)&&j.showzjlx&&$('<div id="zjlxTip" />').css({position:"absolute",left:65,top:20+D+P}).appendTo(b),g>=
x.length&&(g=x.length-1),x[g])j.showzjlx&&S&&$("#zjlxTip").html("大单净额:"+c(S.mfs[g])+" 中单净额:"+c(S.mfb[g])+" 小单净额:"+c(S.mfm[g])),f.beginPath(),f.strokeStyle="#A0A0A0",f.dashedLine(60.5,y[g][1],d-54+0.5,y[g][1],[2,3]),f.dashedLine(y[g][0],20,y[g][0],e-30,[2,3]),f.stroke(),a=y[g][0]-20,60>=a?a=60:a>=d-54-40&&(a=d-54-40),b=x[g].t,$("#fTipTime").html(b.substring(0,2)+":"+b.substring(2,4)).css({left:a,top:e-30}).show(),$("#fTipnowp").css({left:d-54,top:A(x[g].nowp),width:"auto",background:x[g].nowp>=k?"#D45947":
"#66A588","margin-top":"-9px",padding:"0 5px"}).html(x[g].nowp.toFixed(2)).show(),$("#fTip").html(function(a){return a.replace(/<%([^%>]+)?%>/g,function(a,b){var c=x[g][b],d=x[g].nowp;if("t"==b)return c.substring(0,2)+":"+c.substring(2,4);"zhang"==b&&(c=(d-k).toFixed(2));"zhangfu"==b&&(c=(100*((d-k)/k)).toFixed(2)+"%");if("nowp"==b||"av"==b)c=c.toFixed(2);"n"==b&&("万手"==u&&(c/=1E4),c=c.toFixed(2)+u);"np"==b&&(1E4<c&&(c=(c/1E4).toFixed(2)+"万"),1E8<c&&(c=(c/1E8).toFixed(2)+"亿"));var e;d>=k?e="#D45947":
d<k&&(e="#66A588");return'<span style="color:'+e+'">'+c+"</span>"})}("<%t%> 价:<%nowp%> 均:<%av%> 涨跌:<%zhang%> 涨幅:<%zhangfu%> 量:<%n%> 额:<%np%>"))})}});T.config({shim:{jquery:{exports:"$"}},paths:{jquery:"../lib/jquery-1.9.1",genTime:"hexinStock/genTime",arrayToolkit:"common/array/arrayToolkit",mathToolkit:"common/math/mathToolkit",EventTarget:"common/event/eventTarget",Xhr:"common/xhr",canvasLine:"hexinStock/canvas/line",KPainter:"hexinStock/DataProvider/KPainter",KLineProvider:"hexinStock/DataProvider/KLineProvider",
TimeShareProvider:"hexinStock/DataProvider/TimeShareProvider",UrlConfig:"hexinStock/DataProvider/UrlConfig",scale:"hexinStock/scale",Axis:"hexinStock/axis",extent:"hexinStock/extent",Grid:"hexinStock/grid",drawChart:"require-config-pc",drawKLine:"drawBarDemo-pc",kgrid:"hexinStock/KGrid",dashedLine:"hexinStock/dashedLine",genTime:"hexinStock/genTime",arrayToolkit:"common/array/arrayToolkit",barBuilder:"hexinStock/canvas/bar",d3:"../lib/d3.v3.min",techCal:"hexinStock/techCal",detectPR:"hexinStock/detectPR",
techConfig:"hexinStock/techConfig"}});T(["KPainter","KLineProvider","TimeShareProvider","drawChart","drawKLine"],function(b,i,d,g){function l(){$("#canvasPanel").hide();$(".canvas-btn-box").hide();$(".canvas_target_fun").hide();$(".canvas-panel-mask").show();$(".canvas-panel-mask").append('<div class="canvas-loading-icon"></div>')}function n(){$(".canvas-panel-mask").hide();$(".canvas-loading-icon").remove();$("#canvasPanel").show()}var o=null,p=null,m="",h="",c=function(b,c){hx_stockc.hx_canvas_klineConfigs=
c?{callFun:"showFs",historyDataAndNum:c.klConfigs.historyDataAndNum?c.klConfigs.historyDataAndNum:null}:{callFun:"showFs",historyDataAndNum:hx_stockc.hx_canvas_klineConfigs.historyDataAndNum};var a=$("#tcanvas"),e=a.data("fsconfig");l();b&&(h=b);m="";$(".hx-powered-logo").css({top:254,left:53});$("#suspensionId").hasClass("suspension-cc")?$(".opacity-stock-name").css({top:98,left:104}):$(".opacity-stock-name").css({top:120,left:104});$(".fuquan-status").hide("400");p&&(p.kLineDataObj.stopGetData(),
p=null);o&&(o.stopGetData(),o=null);o=new d({isKeepingGet:!0,intervalTime:6E4,code:[h]});o.on("getTodayData",function(b){n();if(!m){var c=b[0].code.split("_");m=b[0].stockName+" "+c[1];$("#canvasStockInfo").text(m);$("#hx_canvas_stock_name").text(b[0].stockName)}chart=new g(a,b,e);chart.draw()});e&&e.showzjlx&&o.getMoneyFlow(function(a){chart.drawzjlx(a)});o.on("getSuspensions",function(a){0!==a.length?($("#suspensionId").addClass("suspension-cc").show(),$(".opacity-stock-name").css("top",98)):$("#suspensionId").hasClass("suspension-cc")&&
($("#suspensionId").removeClass("suspension-cc").hide(),$(".opacity-stock-name").css("top",120))});o.getData()},k=function(c,d){hx_stockc.hx_canvas_klineConfigs={callFun:"showKl",stockType:c.stockType,rehabilitationType:c.rehabilitationType,indicator:c.indicator?c.indicator:null,historyDataAndNum:c.historyDataAndNum?c.historyDataAndNum:null};l();$(".canvas_target_fun").show();$("#suspensionId").hasClass("suspension-cc")?$(".opacity-stock-name").css({top:76,left:78}):$(".opacity-stock-name").css({top:98,
left:78});$(".hx-powered-logo").css({top:212,left:0});d&&(h=d);m="";o&&(o.stopGetData(),o=null);p&&(p.kLineDataObj.stopGetData(),p=null);p=new b({animateEnable:!1,drawDataLength:hx_stockc.hx_canvas_klineConfigs.historyDataAndNum?hx_stockc.hx_canvas_klineConfigs.historyDataAndNum[0]:60,klineConfig:{isKeepingGet:!0,intervalTime:6E4,url:"http://d.10jqka.com.cn/",code:[h],stockType:hx_stockc.hx_canvas_klineConfigs.stockType+hx_stockc.hx_canvas_klineConfigs.rehabilitationType,historyDataAndNum:hx_stockc.hx_canvas_klineConfigs.historyDataAndNum},
eventBtn:{goNext:"nextEvent",goPre:"preEvent",zoomIn:"zoomInEvent",zoomOut:"zoomOutEvent",disabledClass:"disabled"},startDraw:function(){n();$(".fuquan-status").show();$(".canvas-btn-box").show();hx_stockc.hx_canvas_klineConfigs.indicator&&$(".canvas_target_fun").show()},getStockInfo:function(a){if(!m){var b=a.code.split("_");m=a.stockName+" "+b[1];$("#canvasStockInfo").text(m);$("#hx_canvas_stock_name").text(a.stockName)}}})},f=function(b){b.siblings().removeClass("active");b.hasClass("active")||
b.addClass("active")},s=function(b){var c=b.text(),a=b.attr("data-type"),b=b.parent();b.siblings("a")[0].firstChild.data=c;b.siblings("a").attr("data-fuquan",a);b.hide()},q=function(){return $(".canvas_tab").find("[data-fuquan]").attr("data-fuquan")};window.hx_stockc={showFs:c,additionIndicator:"",showKl:function(b,c){var a=$(".canvas_tab").find('[data-type="'+c.klConfigs.stockType+'"]').parent("li");f(a);a=$(".canvas_target_fun").find('[data-type="'+c.klConfigs.indicator+'"]');0===a.length?(hx_stockc.additionIndicator=
c.klConfigs.indicator,$(".canvas_target_fun ul").prepend('<li> <a href="javascript:;" data-type="'+c.klConfigs.indicator+'" data-from="addition" >'+c.klConfigs.indicator+"</a> </li>"),a=$(".canvas_target_fun").find('[data-type="'+c.klConfigs.indicator+'"]').parent("li")):(hx_stockc.additionIndicator&&$(".canvas_target_fun ul").prepend('<li> <a href="javascript:;" data-type="'+hx_stockc.additionIndicator+'" data-from="addition" >'+hx_stockc.additionIndicator+"</a> </li>"),a=a.parent("li"));a.addClass("active").siblings().removeClass("active");
a=$(".khover").find('[data-type="'+c.klConfigs.rehabilitationType+'"]');s(a);a=$("#tcanvas");$(a).data("techItem",c.klConfigs.indicator);k(c.klConfigs,b)},hx_canvas_klineConfigs:null,showCanvasStock:function(b,c){var a=$.extend({},{callFun:"showFs"},b);hx_stockc[a.callFun](c,a)},closeCanvasWindow:function(){o&&(o.stopGetData(),o=null);p&&(p.kLineDataObj.stopGetData(),p=null);m="";h="";$(".canvas_target_fun").find('[data-from="addition"]').parent("li").remove()&&$(".canvas_target_fun").find("li").eq(0).addClass("active");
$("#suspensionId").hasClass("suspension-cc")&&($("#suspensionId").removeClass("suspension-cc").hide(),$(".opacity-stock-name").css("top",120));$("#canvasStockInfo").text("");$("#hx_canvas_stock_name").text("")}};$(".canvas_tab").on("mouseenter","[data-role=fuquan-status]",function(){$(this).children(".khover").show()});$(".canvas_tab").on("mouseleave","[data-role=fuquan-status]",function(){$(this).children(".khover").hide()});$(".canvas_tab").on("click",".draw-type",function(){var b=$(this).parent("li");
f(b)});$(".khover").on("click","a",function(b){b.preventDefault();s($(this));var b=q(),c=$(".canvas_tab").find(".active").children("a"),c=$(c).attr("data-type"),a=$(".canvas_target_fun").find(".active").children("a").attr("data-type");k({rehabilitationType:b,stockType:c,indicator:a,historyDataAndNum:hx_stockc.hx_canvas_klineConfigs.historyDataAndNum},null)});$(".klView").on("click",function(){var b=q(),c=$(this).attr("data-type"),a=$(".canvas_target_fun").find(".active").children("a").attr("data-type");
k({rehabilitationType:b,stockType:c,indicator:a,historyDataAndNum:hx_stockc.hx_canvas_klineConfigs.historyDataAndNum},null)});$("#changefsView").click(function(){c()});$("#preEvent").click(function(){p.getPreData()});$("#nextEvent").click(function(){p.getNextData()});$("#zoomInEvent").click(function(){p.getZoomIn()});$("#zoomOutEvent").click(function(){p.getZoomOut()});$(".canvas_target_fun").on("click","li",function(){var b=$("#tcanvas"),c=$.trim($(this).text());if(hx_stockc.hx_canvas_klineConfigs)hx_stockc.hx_canvas_klineConfigs.indicator=
c;$(this).addClass("active").siblings().removeClass("active");b.data("techItem",c);b.data("tech")(c);hx_stockc.hx_canvas_klineConfigs.indicator=c;$("#canvasPanel").trigger("mousemove")})});v("dataProvider",function(){})})();
